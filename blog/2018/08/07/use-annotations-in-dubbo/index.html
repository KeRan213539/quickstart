<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Use Annotations In Dubbo</title><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en-us"><meta property="og:type" content="website"><meta property="og:site_name" content="Nacos"><meta property="og:title" content="Use Annotations In Dubbo"><meta property="og:url" content="/blog/2018/08/07/use-annotations-in-dubbo/"><meta property="og:image" content="/images/"><meta name=twitter:title content="Nacos"><meta name=twitter:url content="/blog/2018/08/07/use-annotations-in-dubbo/"><meta name=twitter:image content="/images/"><meta name=twitter:card content><link rel=canonical href=/blog/2018/08/07/use-annotations-in-dubbo/><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600,400italic,700" rel=stylesheet type=text/css><link rel=stylesheet href=/css/leaflet.css><link rel=stylesheet href=/css/animate.css><link rel=stylesheet href=/css/icomoon.css><link rel=stylesheet href=/css/simple-line-icons.css><link rel=stylesheet href=/css/magnific-popup.css><link rel=stylesheet href=/css/bootstrap.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom1.css><link rel=stylesheet href=/css/custom2.css><link rel=stylesheet href=/css/font-awesome.min.css><script src=/js/modernizr-2.6.2.min.js></script><meta name=referrer content="no-referrer"><link rel="shortcut icon" href=https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png><script src=/js/jquery.min.js></script><script src=/js/jquery.easing.1.3.js></script><script src=/js/bootstrap.min.js></script><script src=/js/jquery.waypoints.min.js></script><script src=/js/jquery.stellar.min.js></script><script src=/js/jquery.countTo.js></script><script src=/js/jquery.magnific-popup.min.js></script><script src=/js/magnific-popup-options.js></script><script src=/js/main.js></script></head><body><header role=banner id=fh5co-header><div class=container><nav class="navbar navbar-default"><div class=navbar-header><a href=# class="js-fh5co-nav-toggle fh5co-nav-toggle" data-toggle=collapse data-target=#navbar aria-expanded=false aria-controls=navbar><i></i></a><a class=navbar-brand href=index.html><img id=nacosLogo src=/images/nacos.png></a></div><div id=navbar class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a class=external href=/><span>Home</span></a></li><li><a class=external href=/docs><span>Documentation</span></a></li><li class=active><a class=external href=/blog><span>Blog</span></a></li><li><a class=external href=/community><span>Community</span></a></li><li><a class=external href="https://cn.aliyun.com/product/aliware/mse?spm=nacos-website.topbar.0.0.0"><span>Naco In Cloud</span></a>
<img class=menu-img src=https://img.alicdn.com/tfs/TB1esl_m.T1gK0jSZFrXXcNCXXa-200-200.png></li><li><a class=external href=http://console.nacos.io/nacos/index.html><span>Demo-Console</span></a></li><li><div class=dropdown><button class="btn btn-default dropdown-toggle" type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
<span class=caret></span></button><ul class=dropdown-menu><li><a class=external href=/zh/blog/2018/08/07/%E5%9C%A8-dubbo-%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3/>中文</a></li></ul></div></li><li><div class=navbar-nav><input type=search class="form-control nav-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off>
<script src=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js></script><link href=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.css rel=stylesheet><script>docsearch({appId:"3CRHI0VEW6",apiKey:"e7b36bd85080f2bcfb9de34adc766043",indexName:"nacos_test",algoliaOptions:{hitsPerPage:3},inputSelector:'.nav-search-input',debug:false});</script></div></li></ul></div></nav></div></header><section class=animated><div class="col-md-2 blogDocSidebar"><a href=# id=sidebarConsoleBtn><i class="fa fa-bars fa-fw"></i></a><div id=sidebarContent><ul><li><a href=/blog/>Blog</a></li><ul><li class="collapse show" id=blog><ul><li><a class=active href=/blog/news/>Articles</a></li><ul><li class="collapse show" id=blognews><a id=m-blog20190826service-test href=/blog/2019/08/26/service-test/>Service test in dubbo admin</a>
<a id=m-blog20190811tracing-dubbo-service-with-apache-skywalking href=/blog/2019/08/11/tracing-dubbo-service-with-apache-skywalking/>Use apache skywalking in dubbo</a>
<a id=m-blog20190502dubbo-extensible-mechanism-source-code-analysis-part-2 href=/blog/2019/05/02/dubbo-extensible-mechanism-source-code-analysis-part-2/>Dubbo extensible mechanism - part 2</a>
<a id=m-blog20190425dubbo-extensible-mechanism-source-code-analysis-part-1 href=/blog/2019/04/25/dubbo-extensible-mechanism-source-code-analysis-part-1/>Dubbo extensible mechanism - part 1</a>
<a id=m-blog20190220implementation-background-and-practice-of-dubbo-client-asynchronous-interface href=/blog/2019/02/20/implementation-background-and-practice-of-dubbo-client-asynchronous-interface/>Dubbo Async Client</a>
<a id=m-blog20190220implementation-background-and-practice-of-dubbo-server-asynchronous-interface href=/blog/2019/02/20/implementation-background-and-practice-of-dubbo-server-asynchronous-interface/>Dubbo Async Server</a>
<a id=m-blog20190117how-to-use-seata-to-ensure-consistency-between-dubbo-microservices href=/blog/2019/01/17/how-to-use-seata-to-ensure-consistency-between-dubbo-microservices/>Use Seata in Dubbo</a>
<a id=m-blog20181210the-fifth-dubbo-meetup-has-been-held-in-hangzhou href=/blog/2018/12/10/the-fifth-dubbo-meetup-has-been-held-in-hangzhou/>The fifth Dubbo meetup</a>
<a id=m-blog20181107dubbo-integrates-with-nacos-to-become-a-registry href=/blog/2018/11/07/dubbo-integrates-with-nacos-to-become-a-registry/>Use Dubbo with Nacos</a>
<a id=m-blog20181005introduction-to-the-dubbo-protocol href=/blog/2018/10/05/introduction-to-the-dubbo-protocol/>Introduction to the Dubbo protocol</a>
<a id=m-blog20180930integrate-dubbo-with-kubernetes href=/blog/2018/09/30/integrate-dubbo-with-kubernetes/>Integrate Dubbo with Kubernetes</a>
<a id=m-blog20180902how-to-prepare-an-apache-release href=/blog/2018/09/02/how-to-prepare-an-apache-release/>How to prepare an Apache Release</a>
<a id=m-blog20180902how-to-implement-a-fully-asynchronous-calls-chain-based-on-dubbo href=/blog/2018/09/02/how-to-implement-a-fully-asynchronous-calls-chain-based-on-dubbo/>New Async Call</a>
<a id=m-blog20180826the-fourth-dubbo-meetup-has-been-held-in-chengdu href=/blog/2018/08/26/the-fourth-dubbo-meetup-has-been-held-in-chengdu/>The fourth Dubbo meetup</a>
<a id=m-blog20180814dubbo-basic-usage-dubbo-consumer-configuration href=/blog/2018/08/14/dubbo-basic-usage-dubbo-consumer-configuration/>Dubbo Consumer Configuration</a>
<a id=m-blog20180814dubbo-several-ways-about-synchronousasynchronous-invoke href=/blog/2018/08/14/dubbo-several-ways-about-synchronous/asynchronous-invoke/>Dubbo Invoke</a>
<a id=m-blog20180814dubbo-basic-usage-dubbo-provider-configuration href=/blog/2018/08/14/dubbo-basic-usage-dubbo-provider-configuration/>Dubbo Provider Configuration</a>
<a id=m-blog20180814manipulating-services-dynamically-via-qos href=/blog/2018/08/14/manipulating-services-dynamically-via-qos/>Dubbo QoS Introduction</a>
<a id=m-blog20180814source-code-analysis-of-spring-boot-dubbo-app-start-and-stop href=/blog/2018/08/14/source-code-analysis-of-spring-boot-dubbo-app-start-and-stop/>Dubbo start/stop in spring boot</a>
<a id=m-blog20180814implementation-of-cross-language-calls-by-dubbo2js href=/blog/2018/08/14/implementation-of-cross-language-calls-by-dubbo2.js/>dubbo2.js introduction</a>
<a id=m-blog20180814generic-invoke-of-dubbo href=/blog/2018/08/14/generic-invoke-of-dubbo/>Generic invoke</a>
<a id=m-blog20180810dubbos-load-balance href=/blog/2018/08/10/dubbos-load-balance/>Dubbo's Load Balance</a>
<a id=m-blog20180807use-annotations-in-dubbo class=active2 href=/blog/2018/08/07/use-annotations-in-dubbo/>Use Annotations In Dubbo</a>
<a id=m-blog20180807using-zookeeper-in-dubbo href=/blog/2018/08/07/using-zookeeper-in-dubbo/>Using Zookeeper in Dubbo</a>
<a id=m-blog20180807dubbo-101 href=/blog/2018/08/07/dubbo-101/>Your First Dubbo Demo</a>
<a id=m-blog20180730the-third-dubbo-meetup-has-been-held-in-shenzhen href=/blog/2018/07/30/the-third-dubbo-meetup-has-been-held-in-shenzhen/>The third Dubbo meetup</a>
<a id=m-blog20180727sentinel-the-flow-sentinel-of-dubbo-services href=/blog/2018/07/27/sentinel-the-flow-sentinel-of-dubbo-services/>Introduce sentinel</a>
<a id=m-blog20180712tracking-with-pinpoint href=/blog/2018/07/12/tracking-with-pinpoint/>Tracking with Pinpoint</a>
<a id=m-blog20180701your-first-dubbo-filter href=/blog/2018/07/01/your-first-dubbo-filter/>Your First Dubbo Filter</a>
<a id=m-blog20180623the-second-dubbo-shanghai-meetup-has-been-held-successfully href=/blog/2018/06/23/the-second-dubbo-shanghai-meetup-has-been-held-successfully/>The second Dubbo meetup</a>
<a id=m-blog20180512the-first-dubbo-meetup-has-been-held-in-beijing href=/blog/2018/05/12/the-first-dubbo-meetup-has-been-held-in-beijing/>The first Dubbo meetup</a>
<a id=m-blog20180502the-apachecon-na-schedule-has-been-announced href=/blog/2018/05/02/the-apachecon-na-schedule-has-been-announced/>ApacheCon NA</a>
<a id=m-blog20180425the-gsocgoogle-summer-of-code-2018 href=/blog/2018/04/25/the-gsocgoogle-summer-of-code-2018/>GSoC 2018</a>
<a id=m-blog20180422dubbo-roadmap-is-announced-in-qcon-beijing-2018 href=/blog/2018/04/22/dubbo-roadmap-is-announced-in-qcon-beijing-2018/>QCon Beijing 2018</a></li></ul></ul><ul><li><a href=/blog/releases/>Releases</a></li><ul><li class=collapse id=blogreleases><a id=m-blog20200518past-releases href=/blog/2020/05/18/past-releases/>Past Releases</a></li></ul></ul></li></ul></ul></div><script>$(function(){$("#sidebarConsoleBtn").click(function(){$("#sidebarContent").toggle();});});</script></div><div class="col-md-2 blogDocToc"><div class=td-page-meta><a href="https://github.com/nacos-group/nacos-group.github.io/issues/new?title=Use%20Annotations%20In%20Dubbo" target=_blank><i class="fa fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/alibaba/nacos/issues/new target=_blank><i class="fa fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#introduce-annotations>Introduce Annotations</a><ul><li><a href=#enabledubbo>@EnableDubbo</a></li><li><a href=#service>@Service</a></li><li><a href=#reference>@Reference</a></li></ul></li><li><a href=#example-practice>Example practice</a><ul><li><a href=#1interface-definition>1.Interface Definition</a></li><li><a href=#2serverservice-implementation>2.Server:Service Implementation</a></li><li><a href=#3serverassembly-service-provider>3.Server:Assembly Service Provider</a></li><li><a href=#4serverstart-service>4.Server:Start Service</a></li><li><a href=#5serverreference-service>5.Server:Reference Service</a></li><li><a href=#6serverassembly-service-consumer>6.Server:Assembly Service consumer</a></li><li><a href=#7server-initiate-remote-calls>7.Server: Initiate Remote Calls</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div><div class=row><div class=col-md-2></div><div class="col-md-8 blogDocContent"><main role=main><a class="btn btn-lg rssIcon" href=/blog/news/index.xml target=_blank>RSS <i class="fa fa-rss ml-2"></i></a><div class=row><div class=col-md-2><ul></ul></div><div class=col-md-10></div></div><div class=td-content><h1>Use Annotations In Dubbo</h1><div class=lead>This article will introduce you how to use annotations instead of XML to develop Dubbo applications, such as <code>@EnableDubbo</code>, <code>@Service</code> and <code>@Reference</code>.</div><div class="td-byline mb-4"><time datetime=2018-08-07 class=text-muted>Tuesday, August 07, 2018</time></div><p>With the widely promotion and implementation of Microservices Architecture, the Microservices Architecture represented by Spring Boot and Spring Cloud, in Java ecosystem, introduced some brand new programming model, like:</p><ul><li>Annotation-Driven</li><li>External Configuration</li><li>Auto-Configure</li></ul><p>New programming model have some advantages, for example, it does not require <code>XML</code> configuration, it can simplify deployment process, beyond that，it can promote development efficiency. In order to implement the microservice architecture better，Dubbo has provided more perfect support for the above three scenarios since version 2.5.8. This article focuses on introduce annotations rather than discuss the traditional XML configuration approach. There are two kinds of automatic assembly, external configuration and automatic assembly, will be introduced in another aricle.</p><h2 id=introduce-annotations>Introduce Annotations</h2><h3 id=enabledubbo>@EnableDubbo</h3><p>The annotations of <code>@EnableDubbo</code> is a combination of both <code>@EnableDubboConfig</code> and <code>@DubboComponentScan</code>.Related to the annotation driver is <code>@DubboComponentScan</code>.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#719e07>package</span> org.apache.dubbo.config.spring.context.annotation<span style=color:#719e07>;</span>

<span style=color:#268bd2>@EnableDubboConfig</span>
<span style=color:#268bd2>@DubboComponentScan</span>
<span style=color:#268bd2>public</span> <span style=color:#268bd2>@interface</span> EnableDubbo <span style=color:#719e07>{</span>
    <span style=color:#586e75>/**
</span><span style=color:#586e75>     * Base packages to scan for annotated @Service classes.
</span><span style=color:#586e75>     * &lt;p&gt;
</span><span style=color:#586e75>     * Use {@link #scanBasePackageClasses()} for a type-safe alternative to String-based
</span><span style=color:#586e75>     * package names.
</span><span style=color:#586e75>     *
</span><span style=color:#586e75>     * @return the base packages to scan
</span><span style=color:#586e75>     * @see DubboComponentScan#basePackages()
</span><span style=color:#586e75>     */</span>
    <span style=color:#268bd2>@AliasFor</span><span style=color:#719e07>(</span>annotation <span style=color:#719e07>=</span> DubboComponentScan<span style=color:#719e07>.</span>class<span style=color:#719e07>,</span> attribute <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;basePackages&#34;</span><span style=color:#719e07>)</span>
    String<span style=color:#719e07>[]</span> <span style=color:#268bd2>scanBasePackages</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#719e07>{};</span>

    <span style=color:#586e75>/**
</span><span style=color:#586e75>     * Type-safe alternative to {@link #scanBasePackages()} for specifying the packages to
</span><span style=color:#586e75>     * scan for annotated @Service classes. The package of each class specified will be
</span><span style=color:#586e75>     * scanned.
</span><span style=color:#586e75>     *
</span><span style=color:#586e75>     * @return classes from the base packages to scan
</span><span style=color:#586e75>     * @see DubboComponentScan#basePackageClasses
</span><span style=color:#586e75>     */</span>
    <span style=color:#268bd2>@AliasFor</span><span style=color:#719e07>(</span>annotation <span style=color:#719e07>=</span> DubboComponentScan<span style=color:#719e07>.</span>class<span style=color:#719e07>,</span> attribute <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;basePackageClasses&#34;</span><span style=color:#719e07>)</span>
    Class<span style=color:#719e07>&lt;?&gt;[]</span> scanBasePackageClasses<span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#719e07>{};</span>    
<span style=color:#719e07>}</span>
</code></pre></div><p>The <code>@bableDubbo</code> can be used to scan Dubbo&rsquo;s service provider (marked by <code>@Service</code>) and Dubbo&rsquo;s service consumer (marked by <code>Reference</code>) under the specified package name (via <code>scanBasePackages</code>) or in the specified class (via <code>scanBasePackageClasses</code>). After Dubbo&rsquo;s service providers and consumers have been scanned, they have been assembled corresponding and been initialized, and finally the service is exposed or referenced, if you do not use <code>External Configuration</code>, you can use <code>@DubboComponentScan</code> directly.</p><h3 id=service>@Service</h3><p><code>@service</code> is used to configure Dubbo&rsquo;s Service provider,for example:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#268bd2>@Service</span>
<span style=color:#268bd2>public</span> <span style=color:#268bd2>class</span> <span style=color:#268bd2>AnnotatedGreetingService</span> <span style=color:#268bd2>implements</span> GreetingService <span style=color:#719e07>{</span>
    <span style=color:#268bd2>public</span> String <span style=color:#268bd2>sayHello</span><span style=color:#719e07>(</span>String name<span style=color:#719e07>)</span> <span style=color:#719e07>{</span>
        <span style=color:#719e07>return</span> <span style=color:#2aa198>&#34;hello, &#34;</span> <span style=color:#719e07>+</span> name<span style=color:#719e07>;</span>
    <span style=color:#719e07>}</span>
<span style=color:#719e07>}</span>
</code></pre></div><p>Via <code>@Service</code>&rsquo;s properties, you can customize Dubbo&rsquo;s Service provider:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#719e07>package</span> org.apache.dubbo.config.annotation<span style=color:#719e07>;</span>

<span style=color:#268bd2>@Documented</span>
<span style=color:#268bd2>@Retention</span><span style=color:#719e07>(</span>RetentionPolicy<span style=color:#719e07>.</span>RUNTIME<span style=color:#719e07>)</span>
<span style=color:#268bd2>@Target</span><span style=color:#719e07>({</span>ElementType<span style=color:#719e07>.</span>TYPE<span style=color:#719e07>})</span> <span style=color:#586e75>// #1
</span><span style=color:#586e75></span><span style=color:#268bd2>@Inherited</span>
<span style=color:#268bd2>public</span> <span style=color:#268bd2>@interface</span> Service <span style=color:#719e07>{</span>
    Class<span style=color:#719e07>&lt;?&gt;</span> interfaceClass<span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#dc322f>void</span><span style=color:#719e07>.</span>class<span style=color:#719e07>;</span> <span style=color:#586e75>// #2
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>interfaceName</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #3
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>version</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #4
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>group</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #5
</span><span style=color:#586e75></span>    <span style=color:#dc322f>boolean</span> <span style=color:#268bd2>export</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#cb4b16>true</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #6
</span><span style=color:#586e75></span>    <span style=color:#dc322f>boolean</span> <span style=color:#268bd2>register</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#cb4b16>true</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #7
</span><span style=color:#586e75></span>    
    String <span style=color:#268bd2>application</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #8
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>module</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #9
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>provider</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #10
</span><span style=color:#586e75></span>    String<span style=color:#719e07>[]</span> <span style=color:#268bd2>protocol</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#719e07>{};</span> <span style=color:#586e75>// #11
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>monitor</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #12
</span><span style=color:#586e75></span>    String<span style=color:#719e07>[]</span> <span style=color:#268bd2>registry</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#719e07>{};</span> <span style=color:#586e75>// #13
</span><span style=color:#586e75></span><span style=color:#719e07>}</span>
</code></pre></div><p>Which is more important:</p><ol><li><strong>@Service</strong>: Can only be defined on a class, represent a service</li><li><strong>interfaceClass</strong>: specified <code>interface</code>&rsquo;s class implemented by the service provider</li><li><strong>interfaceName</strong>: specified <code>interface</code>&rsquo;s class name implemented by the service provider</li><li><strong>version</strong>: specified the version number of the service</li><li><strong>group</strong>:specified the group of services</li><li><strong>export</strong>:whether to expose service</li><li><strong>registry</strong>:Whether to register service to the registry</li><li><strong>application</strong>:application configuration</li><li><strong>module</strong>:module configuration</li><li><strong>provider</strong>:service provider configuration</li><li><strong>protocol</strong>:protocol configuration</li><li><strong>monitor</strong>:monitoring center configuration</li><li><strong>registr</strong>:registry configuration</li></ol><p>In addition, it should be noted that, <code>application</code>, <code>module</code>, <code>provider</code>, <code>protocol</code>, <code>monitor</code>, <code>registry</code> (from 8 to 13) need to provide the name of the corresponding <code>spring bean</code>,These bean assembly completed either through traditional XML configuration,or by the modern Java Config. This article will show you how to use <code>Java Config</code>.</p><h3 id=reference>@Reference</h3><p><code>@Reference</code> is used to configure Dubbo&rsquo;s Service consumer,for example:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#268bd2>@Component</span>
<span style=color:#268bd2>public</span> <span style=color:#268bd2>class</span> <span style=color:#268bd2>GreetingServiceConsumer</span> <span style=color:#719e07>{</span>
    <span style=color:#268bd2>@Reference</span>
    <span style=color:#268bd2>private</span> GreetingService greetingService<span style=color:#719e07>;</span>

    <span style=color:#268bd2>public</span> String <span style=color:#268bd2>doSayHello</span><span style=color:#719e07>(</span>String name<span style=color:#719e07>)</span> <span style=color:#719e07>{</span>
        <span style=color:#719e07>return</span> greetingService<span style=color:#719e07>.</span>sayHello<span style=color:#719e07>(</span>name<span style=color:#719e07>);</span>
    <span style=color:#719e07>}</span>
<span style=color:#719e07>}</span>
</code></pre></div><p>Via <code>@Reference</code>&rsquo;s properties, you can customize Dubbo&rsquo;s Service consumer:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#719e07>package</span> org.apache.dubbo.config.annotation<span style=color:#719e07>;</span>

<span style=color:#268bd2>@Documented</span>
<span style=color:#268bd2>@Retention</span><span style=color:#719e07>(</span>RetentionPolicy<span style=color:#719e07>.</span>RUNTIME<span style=color:#719e07>)</span>
<span style=color:#268bd2>@Target</span><span style=color:#719e07>({</span>ElementType<span style=color:#719e07>.</span>FIELD<span style=color:#719e07>,</span> ElementType<span style=color:#719e07>.</span>METHOD<span style=color:#719e07>,</span> ElementType<span style=color:#719e07>.</span>ANNOTATION_TYPE<span style=color:#719e07>})</span> <span style=color:#586e75>// #1
</span><span style=color:#586e75></span><span style=color:#268bd2>public</span> <span style=color:#268bd2>@interface</span> Reference <span style=color:#719e07>{</span>
    Class<span style=color:#719e07>&lt;?&gt;</span> interfaceClass<span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#dc322f>void</span><span style=color:#719e07>.</span>class<span style=color:#719e07>;</span> <span style=color:#586e75>// #2
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>interfaceName</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #3
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>version</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #4
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>group</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #5
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>url</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #6
</span><span style=color:#586e75></span>    
    String <span style=color:#268bd2>application</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #7
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>module</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #8
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>consumer</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #9
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>protocol</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #10
</span><span style=color:#586e75></span>    String <span style=color:#268bd2>monitor</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#2aa198>&#34;&#34;</span><span style=color:#719e07>;</span> <span style=color:#586e75>// #11
</span><span style=color:#586e75></span>    String<span style=color:#719e07>[]</span> <span style=color:#268bd2>registry</span><span style=color:#719e07>()</span> <span style=color:#719e07>default</span> <span style=color:#719e07>{};</span> <span style=color:#586e75>// #12
</span><span style=color:#586e75></span><span style=color:#719e07>}</span>
</code></pre></div><p>Which is more important:</p><ol><li><strong>@Reference</strong>:you can define it on a field in a class, you can define it on a method, you can even modify another annotation, it represent a reference to a service.Normally <code>@Reference</code> is defined in one field</li><li><strong>interfaceClass</strong> : specified <code>interface</code>&rsquo;s class implemented by the service provider</li><li><strong>interfaceName</strong>: specified <code>interface</code>&rsquo;s class name implemented by the service provider</li><li><strong>version</strong>: specified the version number of the service</li><li><strong>group</strong>:pecified the group of services</li><li><strong>url</strong>: invoking the registry directly by specifying the URL of the service provider</li><li><strong>application</strong>:application configuration</li><li><strong>module</strong>:module configuration</li><li><strong>consumer</strong>:service consumer configuration</li><li><strong>protocol</strong>:protocol configuration</li><li><strong>monitor</strong>:monitoring center configuration</li><li><strong>registr</strong>:registry configuration</li></ol><p>In addition, it should be noted that, <code>application</code>, <code>module</code>, <code>consumer</code>, <code>protocol</code>, <code>monitor</code>, <code>registry</code> (from 7 to 12) need to provide the name of the corresponding <code>spring bean</code>,These bean assembly completed either through traditional XML configuration,or by the modern Java Config. This article will show you how to use <code>Java Config</code>.</p><h2 id=example-practice>Example practice</h2><p>After learn what <code>@EnableDubbo</code>, <code>@Service</code>, <code>@Reference</code> is, there is a practical example showing how to use the annotation to develop a Dubbo application.The following code can be found at <a href=https://github.com/dubbo/dubbo-samples/tree/master/dubbo-samples-annotation>https://github.com/dubbo/dubbo-samples/tree/master/dubbo-samples-annotation</a></p><h3 id=1interface-definition>1.Interface Definition</h3><p>Define a simple <code>GreetingService</code> interface with only a simple method <code>sayHello</code> to the caller.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#268bd2>public</span> <span style=color:#268bd2>interface</span> <span style=color:#268bd2>GreetingService</span> <span style=color:#719e07>{</span>
    String <span style=color:#268bd2>sayHello</span><span style=color:#719e07>(</span>String name<span style=color:#719e07>);</span>
<span style=color:#719e07>}</span>
</code></pre></div><h3 id=2serverservice-implementation>2.Server:Service Implementation</h3><p>Implement the <code>GreetingService</code> interface, and mark it as a service for Dubbo via @Service.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#268bd2>@Service</span>
<span style=color:#268bd2>public</span> <span style=color:#268bd2>class</span> <span style=color:#268bd2>AnnotatedGreetingService</span> <span style=color:#268bd2>implements</span> GreetingService <span style=color:#719e07>{</span>
    <span style=color:#268bd2>public</span> String <span style=color:#268bd2>sayHello</span><span style=color:#719e07>(</span>String name<span style=color:#719e07>)</span> <span style=color:#719e07>{</span>
        <span style=color:#719e07>return</span> <span style=color:#2aa198>&#34;hello, &#34;</span> <span style=color:#719e07>+</span> name<span style=color:#719e07>;</span>
    <span style=color:#719e07>}</span>
<span style=color:#719e07>}</span>
</code></pre></div><h3 id=3serverassembly-service-provider>3.Server:Assembly Service Provider</h3><p>You can discover, assemble, and provide Dubbo&rsquo;s services through the Java config technology (@Configuration) and annotation scan (@EnableDubbo) in Spring.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#268bd2>@Configuration</span>
<span style=color:#268bd2>@EnableDubbo</span><span style=color:#719e07>(</span>scanBasePackages <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.impl&#34;</span><span style=color:#719e07>)</span>
<span style=color:#268bd2>static</span> <span style=color:#268bd2>class</span> <span style=color:#268bd2>ProviderConfiguration</span> <span style=color:#719e07>{</span>
    <span style=color:#268bd2>@Bean</span> <span style=color:#586e75>// #1
</span><span style=color:#586e75></span>    <span style=color:#268bd2>public</span> ProviderConfig <span style=color:#268bd2>providerConfig</span><span style=color:#719e07>()</span> <span style=color:#719e07>{</span>
        ProviderConfig providerConfig <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ProviderConfig<span style=color:#719e07>();</span>
        providerConfig<span style=color:#719e07>.</span>setTimeout<span style=color:#719e07>(</span>1000<span style=color:#719e07>);</span>
        <span style=color:#719e07>return</span> providerConfig<span style=color:#719e07>;</span>
    <span style=color:#719e07>}</span>

    <span style=color:#268bd2>@Bean</span> <span style=color:#586e75>// #2
</span><span style=color:#586e75></span>    <span style=color:#268bd2>public</span> ApplicationConfig <span style=color:#268bd2>applicationConfig</span><span style=color:#719e07>()</span> <span style=color:#719e07>{</span>
        ApplicationConfig applicationConfig <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ApplicationConfig<span style=color:#719e07>();</span>
        applicationConfig<span style=color:#719e07>.</span>setName<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;dubbo-annotation-provider&#34;</span><span style=color:#719e07>);</span>
        <span style=color:#719e07>return</span> applicationConfig<span style=color:#719e07>;</span>
    <span style=color:#719e07>}</span>

    <span style=color:#268bd2>@Bean</span> <span style=color:#586e75>// #3
</span><span style=color:#586e75></span>    <span style=color:#268bd2>public</span> RegistryConfig <span style=color:#268bd2>registryConfig</span><span style=color:#719e07>()</span> <span style=color:#719e07>{</span>
        RegistryConfig registryConfig <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> RegistryConfig<span style=color:#719e07>();</span>
        registryConfig<span style=color:#719e07>.</span>setProtocol<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;zookeeper&#34;</span><span style=color:#719e07>);</span>
        registryConfig<span style=color:#719e07>.</span>setAddress<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;localhost&#34;</span><span style=color:#719e07>);</span>
        registryConfig<span style=color:#719e07>.</span>setPort<span style=color:#719e07>(</span>2181<span style=color:#719e07>);</span>
        <span style=color:#719e07>return</span> registryConfig<span style=color:#719e07>;</span>
    <span style=color:#719e07>}</span>

    <span style=color:#268bd2>@Bean</span> <span style=color:#586e75>// #4
</span><span style=color:#586e75></span>    <span style=color:#268bd2>public</span> ProtocolConfig <span style=color:#268bd2>protocolConfig</span><span style=color:#719e07>()</span> <span style=color:#719e07>{</span>
        ProtocolConfig protocolConfig <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ProtocolConfig<span style=color:#719e07>();</span>
        protocolConfig<span style=color:#719e07>.</span>setName<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;dubbo&#34;</span><span style=color:#719e07>);</span>
        protocolConfig<span style=color:#719e07>.</span>setPort<span style=color:#719e07>(</span>20880<span style=color:#719e07>);</span>
        <span style=color:#719e07>return</span> protocolConfig<span style=color:#719e07>;</span>
    <span style=color:#719e07>}</span>
<span style=color:#719e07>}</span>
</code></pre></div><p>Description：</p><ul><li>Scan all classes marked with <code>@Service</code> under <code>com.alibaba.dubbo.samples.impl</code> with <code>@EnableDubbo</code></li><li>Via @Configuration, all @Beans in the ProviderConfiguration are assembled using the way of <code>Java Config</code> and then injected into the Dubbo service, which means the class marked with <code>@Service</code>.Which included:
i. <strong>ProviderConfig</strong>:Service provider configuration
ii. <strong>ApplicationConfig</strong>:Application configuration
iii.<strong>RegistryConfig</strong>:registry configuration
iv. <strong>ProtocolConfig</strong>:Protocol configuration</li></ul><h3 id=4serverstart-service>4.Server:Start Service</h3><p>In the <code>main</code> method to provide external <code>Dubbo</code> service by starting a <code>Spring Context</code>.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#268bd2>public</span> <span style=color:#268bd2>class</span> <span style=color:#268bd2>ProviderBootstrap</span> <span style=color:#719e07>{</span>
    <span style=color:#268bd2>public</span> <span style=color:#268bd2>static</span> <span style=color:#dc322f>void</span> <span style=color:#268bd2>main</span><span style=color:#719e07>(</span>String<span style=color:#719e07>[]</span> args<span style=color:#719e07>)</span> <span style=color:#268bd2>throws</span> Exception <span style=color:#719e07>{</span>
        <span style=color:#719e07>new</span> EmbeddedZooKeeper<span style=color:#719e07>(</span>2181<span style=color:#719e07>,</span> <span style=color:#cb4b16>false</span><span style=color:#719e07>).</span>start<span style=color:#719e07>();</span> <span style=color:#586e75>// #1
</span><span style=color:#586e75></span>        AnnotationConfigApplicationContext context <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> AnnotationConfigApplicationContext<span style=color:#719e07>(</span>ProviderConfiguration<span style=color:#719e07>.</span>class<span style=color:#719e07>);</span> <span style=color:#586e75>// #2
</span><span style=color:#586e75></span>        context<span style=color:#719e07>.</span>start<span style=color:#719e07>();</span> <span style=color:#586e75>// #3
</span><span style=color:#586e75></span>        System<span style=color:#719e07>.</span>in<span style=color:#719e07>.</span>read<span style=color:#719e07>();</span> <span style=color:#586e75>// #4
</span><span style=color:#586e75></span>    <span style=color:#719e07>}</span>
<span style=color:#719e07>}</span>
</code></pre></div><p>Description：</p><ol><li>Start an embedded <code>zookeeper</code> and provide service registry on port <code>2181</code></li><li>Initialize an example of an AnnotationConfigApplicationContext and pass the <code>ProviderConfiguration</code> into the example to complete the automatic discovery and assembly of the <code>Dubbo</code> service.</li><li>Start the <code>Spring Context</code> and start providing external <code>Dubbo</code> services.</li><li>Because it is a server, you need to prevent the process exit by blocking the main thread.</li></ol><p>Start the <code>main</code> method of the server, you will see the following output, on behalf of the server startup success, and registered the <code>GreetingService</code> service in the <code>ZookeeperRegistry</code>:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#719e07>[</span>01/08/18 02:12:51:051 CST<span style=color:#719e07>]</span> main  INFO transport.AbstractServer:  <span style=color:#719e07>[</span>DUBBO<span style=color:#719e07>]</span> Start NettyServer <span style=color:#b58900>bind</span> /0.0.0.0:20880, <span style=color:#b58900>export</span> /192.168.99.1:20880, dubbo version: 2.6.2, current host: 192.168.99.1

<span style=color:#719e07>[</span>01/08/18 02:12:51:051 CST<span style=color:#719e07>]</span> main  INFO zookeeper.ZookeeperRegistry:  <span style=color:#719e07>[</span>DUBBO<span style=color:#719e07>]</span> Register: dubbo://192.168.99.1:20880/com.alibaba.dubbo.samples.api.GreetingService?anyhost<span style=color:#719e07>=</span>true&amp;<span style=color:#268bd2>application</span><span style=color:#719e07>=</span>dubbo-annotation-provider&amp;default.timeout<span style=color:#719e07>=</span>1000&amp;<span style=color:#268bd2>dubbo</span><span style=color:#719e07>=</span>2.6.2&amp;<span style=color:#268bd2>generic</span><span style=color:#719e07>=</span>false&amp;<span style=color:#268bd2>interface</span><span style=color:#719e07>=</span>com.alibaba.dubbo.samples.api
</code></pre></div><h3 id=5serverreference-service>5.Server:Reference Service</h3><p>Marking the member variable of the <code>GreetingService</code> via <code>@Reference</code> .The <code>greetingService</code> is a reference to the <code>Dubbo</code> service, which means that it can simply provide through the interface to the remote party to initiate service calls, and the client does not implement <code>GreetingService</code> interface.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#268bd2>@Component</span><span style=color:#719e07>(</span><span style=color:#2aa198>&#34;annotatedConsumer&#34;</span><span style=color:#719e07>)</span>
<span style=color:#268bd2>public</span> <span style=color:#268bd2>class</span> <span style=color:#268bd2>GreetingServiceConsumer</span> <span style=color:#719e07>{</span>
    <span style=color:#268bd2>@Reference</span>
    <span style=color:#268bd2>private</span> GreetingService greetingService<span style=color:#719e07>;</span>

    <span style=color:#268bd2>public</span> String <span style=color:#268bd2>doSayHello</span><span style=color:#719e07>(</span>String name<span style=color:#719e07>)</span> <span style=color:#719e07>{</span>
        <span style=color:#719e07>return</span> greetingService<span style=color:#719e07>.</span>sayHello<span style=color:#719e07>(</span>name<span style=color:#719e07>);</span>
    <span style=color:#719e07>}</span>
<span style=color:#719e07>}</span>
</code></pre></div><h3 id=6serverassembly-service-consumer>6.Server:Assembly Service consumer</h3><p>Just like <strong>3. Server:Assembly Service Provider</strong> You can discover, assemble, and provide Dubbo&rsquo;s service consumer through the Java config technology (@Configuration) and annotation scan (@EnableDubbo) in Spring.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#268bd2>@Configuration</span>
<span style=color:#268bd2>@EnableDubbo</span><span style=color:#719e07>(</span>scanBasePackages <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.action&#34;</span><span style=color:#719e07>)</span>
<span style=color:#268bd2>@ComponentScan</span><span style=color:#719e07>(</span>value <span style=color:#719e07>=</span> <span style=color:#719e07>{</span><span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.action&#34;</span><span style=color:#719e07>})</span>
<span style=color:#268bd2>static</span> <span style=color:#268bd2>class</span> <span style=color:#268bd2>ConsumerConfiguration</span> <span style=color:#719e07>{</span>
    <span style=color:#268bd2>@Bean</span> <span style=color:#586e75>// #1
</span><span style=color:#586e75></span>    <span style=color:#268bd2>public</span> ApplicationConfig <span style=color:#268bd2>applicationConfig</span><span style=color:#719e07>()</span> <span style=color:#719e07>{</span>
        ApplicationConfig applicationConfig <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ApplicationConfig<span style=color:#719e07>();</span>
        applicationConfig<span style=color:#719e07>.</span>setName<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;dubbo-annotation-consumer&#34;</span><span style=color:#719e07>);</span>
        <span style=color:#719e07>return</span> applicationConfig<span style=color:#719e07>;</span>
    <span style=color:#719e07>}</span>

    <span style=color:#268bd2>@Bean</span> <span style=color:#586e75>// #2
</span><span style=color:#586e75></span>    <span style=color:#268bd2>public</span> ConsumerConfig <span style=color:#268bd2>consumerConfig</span><span style=color:#719e07>()</span> <span style=color:#719e07>{</span>
        ConsumerConfig consumerConfig <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ConsumerConfig<span style=color:#719e07>();</span>
        consumerConfig<span style=color:#719e07>.</span>setTimeout<span style=color:#719e07>(</span>3000<span style=color:#719e07>);</span>
        <span style=color:#719e07>return</span> consumerConfig<span style=color:#719e07>;</span>
    <span style=color:#719e07>}</span>

    <span style=color:#268bd2>@Bean</span> <span style=color:#586e75>// #3
</span><span style=color:#586e75></span>    <span style=color:#268bd2>public</span> RegistryConfig <span style=color:#268bd2>registryConfig</span><span style=color:#719e07>()</span> <span style=color:#719e07>{</span>
        RegistryConfig registryConfig <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> RegistryConfig<span style=color:#719e07>();</span>
        registryConfig<span style=color:#719e07>.</span>setProtocol<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;zookeeper&#34;</span><span style=color:#719e07>);</span>
        registryConfig<span style=color:#719e07>.</span>setAddress<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;localhost&#34;</span><span style=color:#719e07>);</span>
        registryConfig<span style=color:#719e07>.</span>setPort<span style=color:#719e07>(</span>2181<span style=color:#719e07>);</span>
        <span style=color:#719e07>return</span> registryConfig<span style=color:#719e07>;</span>
    <span style=color:#719e07>}</span>
<span style=color:#719e07>}</span>
</code></pre></div><p>Description：</p><ul><li>Scan all classes marked with <code>@Service</code> under <code>com.alibaba.dubbo.samples.impl</code> with <code>@Reference</code></li><li>Via @Configuration, all @Beans in the ProviderConfiguration are assembled using the way of <code>Java Config</code> and then injected into the Dubbo service, which means the class marked with <code>@Reference</code>.Which included:
i. <code>ApplicationConfig</code>: Application configuration
ii. <code>ConsumerConfig</code>:Service consumer configuration
iii.<code>RegistryConfig</code>:Registry configuration.Note:The configuration here needs to be consistent with the configuration information of the EmbeddedZooKeeper when started by the service provider.</li></ul><h3 id=7server-initiate-remote-calls>7.Server: Initiate Remote Calls</h3><p>In the <code>main</code> method, you can start a <code>Spring Context</code> to find the service consumer of the assembled <code>Dubbo</code> from it, and initiate a remote call.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#268bd2>public</span> <span style=color:#268bd2>class</span> <span style=color:#268bd2>ConsumerBootstrap</span> <span style=color:#719e07>{</span>
    <span style=color:#268bd2>public</span> <span style=color:#268bd2>static</span> <span style=color:#dc322f>void</span> <span style=color:#268bd2>main</span><span style=color:#719e07>(</span>String<span style=color:#719e07>[]</span> args<span style=color:#719e07>)</span> <span style=color:#719e07>{</span>
        AnnotationConfigApplicationContext context <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> AnnotationConfigApplicationContext<span style=color:#719e07>(</span>ConsumerConfiguration<span style=color:#719e07>.</span>class<span style=color:#719e07>);</span> <span style=color:#586e75>// #1
</span><span style=color:#586e75></span>        context<span style=color:#719e07>.</span>start<span style=color:#719e07>();</span> <span style=color:#586e75>// #2
</span><span style=color:#586e75></span>        GreetingServiceConsumer greetingServiceConsumer <span style=color:#719e07>=</span> context<span style=color:#719e07>.</span>getBean<span style=color:#719e07>(</span>GreetingServiceConsumer<span style=color:#719e07>.</span>class<span style=color:#719e07>);</span> <span style=color:#586e75>// #3
</span><span style=color:#586e75></span>        String hello <span style=color:#719e07>=</span> greetingServiceConsumer<span style=color:#719e07>.</span>doSayHello<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;annotation&#34;</span><span style=color:#719e07>);</span> <span style=color:#586e75>// #4
</span><span style=color:#586e75></span>        System<span style=color:#719e07>.</span>out<span style=color:#719e07>.</span>println<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;result: &#34;</span> <span style=color:#719e07>+</span> hello<span style=color:#719e07>);</span> <span style=color:#586e75>// #5
</span><span style=color:#586e75></span>    <span style=color:#719e07>}</span>
<span style=color:#719e07>}</span>
</code></pre></div><p>Description：</p><ul><li>Initialize an example of an AnnotationConfigApplicationContext and pass the <code>ProviderConfiguration</code> into the example to complete the automatic discovery and assembly of the <code>Dubbo</code> service consumer.</li><li>start <code>Spring Context</code>.</li><li>Find <code>bean</code> which type is <code>GreetingServiceConsumer</code> from <code>Context</code>.</li><li>Call the <code>doSayHello</code> method and finally initiate a remote call via Dubbo&rsquo;s service reference (marked by @Reference)</li><li>Print call result
Start the Server&rsquo;s <code>main</code> method, you will see the following output, which returns the <code>result</code>: hello, annotation:</li></ul><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#719e07>[</span>01/08/18 02:38:40:040 CST<span style=color:#719e07>]</span> main  INFO config.AbstractConfig:  <span style=color:#719e07>[</span>DUBBO<span style=color:#719e07>]</span> Refer dubbo service com.alibaba.dubbo.samples.api.GreetingService from url zookeeper://localhost:2181/com.alibaba.dubbo.registry.RegistryService?anyhost<span style=color:#719e07>=</span>true&amp;<span style=color:#268bd2>application</span><span style=color:#719e07>=</span>dubbo-annotation-consumer&amp;<span style=color:#268bd2>check</span><span style=color:#719e07>=</span>false&amp;default.timeout<span style=color:#719e07>=</span>3000&amp;<span style=color:#268bd2>dubbo</span><span style=color:#719e07>=</span>2.6.2&amp;<span style=color:#268bd2>generic</span><span style=color:#719e07>=</span>false&amp;<span style=color:#268bd2>interface</span><span style=color:#719e07>=</span>com.alibaba.dubbo.samples.api.GreetingService&amp;<span style=color:#268bd2>methods</span><span style=color:#719e07>=</span>sayHello&amp;<span style=color:#268bd2>pid</span><span style=color:#719e07>=</span>33001&amp;register.ip<span style=color:#719e07>=</span>192.168.99.1&amp;remote.timestamp<span style=color:#719e07>=</span>1533105502086&amp;<span style=color:#268bd2>side</span><span style=color:#719e07>=</span>consumer&amp;<span style=color:#268bd2>timestamp</span><span style=color:#719e07>=</span>1533105519216, dubbo version: 2.6.2, current host: 192.168.99.1
<span style=color:#719e07>[</span>01/08/18 02:38:40:040 CST<span style=color:#719e07>]</span> main  INFO annotation.ReferenceBeanBuilder: &lt;dubbo:reference <span style=color:#268bd2>object</span><span style=color:#719e07>=</span><span style=color:#2aa198>&#34;com.alibaba.dubbo.common.bytecode.proxy0@673be18f&#34;</span> <span style=color:#268bd2>singleton</span><span style=color:#719e07>=</span><span style=color:#2aa198>&#34;true&#34;</span> <span style=color:#268bd2>interface</span><span style=color:#719e07>=</span><span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.api.GreetingService&#34;</span> <span style=color:#268bd2>uniqueServiceName</span><span style=color:#719e07>=</span><span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.api.GreetingService&#34;</span> <span style=color:#268bd2>generic</span><span style=color:#719e07>=</span><span style=color:#2aa198>&#34;false&#34;</span> <span style=color:#268bd2>id</span><span style=color:#719e07>=</span><span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.api.GreetingService&#34;</span> /&gt; has been built.
result: hello, annotation
</code></pre></div><h2 id=conclusion>Conclusion</h2><p>By studying this article, the reader can master the basic concepts of <code>Dubbo</code>&rsquo;s exclusive <code>annotations</code> , <code>@EnableDubbo</code>, <code>@Service</code>, <code>@Reference</code>, and master it&rsquo;s basic usage through a simple <code>Dubbo</code> application.</p><p>In addition to traditional <code>XML</code> configuration, <code>Spring</code> offers more modern configurations such as annotation drivers, externalization, and auto-assembly.This article focuses on the development of <code>Dubbo</code> applications through annotations. You can be seen that annotation mode programming is more concise and simple than XML configuration. In future, we will introduce the use of externalization configuration and automatic assembly in <code>Dubbo</code> further.</p></div></main></div><div class=col-md-2></div></div></section><footer id=footer role=contentinfo><div class=container><img src=/images/nacos_gray.png><div class=row><div class=col-md-6><h3>Vision</h3><p>By providing an easy-to-use service infrastructure such as dynamic service
discovery, service configuration, service sharing and management and etc., Nacos help users better
construct, deliver and manage their own service platform, reuse and composite business service
faster and deliver value of business innovation more quickly so as to win market for users in the
era of cloud native and in all cloud environments, such as private, mixed, or public clouds.</p></div><div class=col-md-3><dl><dt>Documentation</dt><dd><a href=/en-us/docs/what-is-nacos.html target=_self>Overview</a></dd><dd><a href=/en-us/docs/quick-start.html target=_self>Quick start</a></dd><dd><a href=/en-us/docs/contributing.html target=_self>Developer guide</a></dd></dl></div><div class=col-md-3><dl><dt>Resources</dt><dd><a href=/en-us/community/index.html target=_self>Community</a></dd><dd><a href="https://cn.aliyun.com/product/aliware/mse?spm=nacos-website.topbar.0.0.0" target=_self>Cloud Service MSE</a></dd><dd><a href="https://www.aliyun.com/product/edas?source_type=nacos_pc_20181219" target=_self>Cloud Service EDAS</a></dd><dd><a href="https://www.aliyun.com/product/ahas?source_type=nacos_pc_20190225" target=_self>Cloud Service AHAS</a></dd></dl></div></div><div class="col-md-12 text-center copyright"><span>© 2018 The Nacos Authors | An Alibaba Middleware (Aliware) Project</span></div></div></footer></body><script type=text/javascript>;(function(){$('#fh5co-header').addClass('navbar-fixed-top fh5co-animated slideInDown');$('#nacosLogo').attr("src","/images/nacos_colorful.png")}());</script></html>