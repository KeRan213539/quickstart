<!DOCTYPE html>






<html lang="en">
<head>
  

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Generic invoke of Dubbo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    
    <meta http-equiv="content-language" content="en-us" />

  

    
    
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Nacos">
    <meta property="og:title" content="Generic invoke of Dubbo">
    <meta property="og:url" content="/blog/2018/08/14/generic-invoke-of-dubbo/">
    <meta property="og:image" content="/images/">
    <meta name="twitter:title" content="Nacos" />
    <meta name="twitter:url" content="/blog/2018/08/14/generic-invoke-of-dubbo/" />
    <meta name="twitter:image" content="/images/" />
    <meta name="twitter:card" content="" />
    
    
    
    <link rel="canonical" href="/blog/2018/08/14/generic-invoke-of-dubbo/"/>

    


    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600,400italic,700' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="/css/leaflet.css" />

    
    <link rel="stylesheet" href="/css/animate.css">
    
    <link rel="stylesheet" href="/css/icomoon.css">
    
    <link rel="stylesheet" href="/css/simple-line-icons.css">
    
    <link rel="stylesheet" href="/css/magnific-popup.css">
    
    <link rel="stylesheet" href="/css/bootstrap.css">

    
    <link rel="stylesheet" href="/css/style.css">

    
    
    <link rel="stylesheet" href="/css/custom1.css">
    
    <link rel="stylesheet" href="/css/custom2.css">
    
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    

    
    <script src="/js/modernizr-2.6.2.min.js"></script>
    
    

  <meta name="referrer" content="no-referrer"/>
  <link rel="shortcut icon" href="https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png"/>
  	
	<script src="/js/jquery.min.js"></script>
	
	<script src="/js/jquery.easing.1.3.js"></script>
	
	<script src="/js/bootstrap.min.js"></script>
	
	<script src="/js/jquery.waypoints.min.js"></script>
	
	<script src="/js/jquery.stellar.min.js"></script>
	
	<script src="/js/jquery.countTo.js"></script>
	
	<script src="/js/jquery.magnific-popup.min.js"></script>
	<script src="/js/magnific-popup-options.js"></script>
	


	
	<script src="/js/main.js"></script>

</head>
<body>


    <header role="banner" id="fh5co-header">
        <div class="container">
            
            <nav class="navbar navbar-default">
                <div class="navbar-header">
                    
                    <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><i></i></a>
                    <a class="navbar-brand" href="index.html"><img id="nacosLogo" src="/images/nacos.png"></a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                  <ul class="nav navbar-nav navbar-right">
                    
                    
                    
                    <li><a class="external" href="/"><span>Home</span></a></li>
                    
                    
                    

                    

                    

                    

                    

                    
                        <li><a class="external" href="/docs"><span>Documentation</span></a></li>
                    
                        <li class="active"><a class="external" href="/blog"><span>Blog</span></a></li>
                    
                    <li>
                      

<div class="dropdown">
	<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"
					aria-haspopup="true" aria-expanded="false" >
		English
		<span class="caret"></span>
	</button>
	<ul class="dropdown-menu">
		
		<li><a class="external" href="/zh/blog/2018/08/14/dubbo%E7%9A%84%E6%B3%9B%E5%8C%96%E8%B0%83%E7%94%A8/">中文</a></li>
		
	</ul>
</div>
                    </li>
                </ul>
            </div>
        </nav>
        
    </div>
</header>

<section class="animated">
  <div class="col-md-2 blogDocSidebar">
    




<a href="#" id="sidebarConsoleBtn"><i class="fa fa-bars fa-fw"></i></a>
<div id="sidebarContent">
  
  






<ul>
  <li>
    <a href="/blog/" >Blog</a>
  </li>
  <ul>
    <li class="collapse show" id="blog">
      
      
      
      
        
          






<ul>
  <li>
    <a class="active" href="/blog/news/" >Articles</a>
  </li>
  <ul>
    <li class="collapse show" id="blognews">
      
      
      
      
        
          
          
          <a id="m-blog20190826service-test" href="/blog/2019/08/26/service-test/">Service test in dubbo admin</a>
        
      
      
      
        
          
          
          <a id="m-blog20190811tracing-dubbo-service-with-apache-skywalking" href="/blog/2019/08/11/tracing-dubbo-service-with-apache-skywalking/">Use apache skywalking in dubbo</a>
        
      
      
      
        
          
          
          <a id="m-blog20190502dubbo-extensible-mechanism-source-code-analysis-part-2" href="/blog/2019/05/02/dubbo-extensible-mechanism-source-code-analysis-part-2/">Dubbo extensible mechanism - part 2</a>
        
      
      
      
        
          
          
          <a id="m-blog20190425dubbo-extensible-mechanism-source-code-analysis-part-1" href="/blog/2019/04/25/dubbo-extensible-mechanism-source-code-analysis-part-1/">Dubbo extensible mechanism - part 1</a>
        
      
      
      
        
          
          
          <a id="m-blog20190220implementation-background-and-practice-of-dubbo-client-asynchronous-interface" href="/blog/2019/02/20/implementation-background-and-practice-of-dubbo-client-asynchronous-interface/">Dubbo Async Client</a>
        
      
      
      
        
          
          
          <a id="m-blog20190220implementation-background-and-practice-of-dubbo-server-asynchronous-interface" href="/blog/2019/02/20/implementation-background-and-practice-of-dubbo-server-asynchronous-interface/">Dubbo Async Server</a>
        
      
      
      
        
          
          
          <a id="m-blog20190117how-to-use-seata-to-ensure-consistency-between-dubbo-microservices" href="/blog/2019/01/17/how-to-use-seata-to-ensure-consistency-between-dubbo-microservices/">Use Seata in Dubbo</a>
        
      
      
      
        
          
          
          <a id="m-blog20181210the-fifth-dubbo-meetup-has-been-held-in-hangzhou" href="/blog/2018/12/10/the-fifth-dubbo-meetup-has-been-held-in-hangzhou/">The fifth Dubbo meetup</a>
        
      
      
      
        
          
          
          <a id="m-blog20181107dubbo-integrates-with-nacos-to-become-a-registry" href="/blog/2018/11/07/dubbo-integrates-with-nacos-to-become-a-registry/">Use Dubbo with Nacos</a>
        
      
      
      
        
          
          
          <a id="m-blog20181005introduction-to-the-dubbo-protocol" href="/blog/2018/10/05/introduction-to-the-dubbo-protocol/">Introduction to the Dubbo protocol</a>
        
      
      
      
        
          
          
          <a id="m-blog20180930integrate-dubbo-with-kubernetes" href="/blog/2018/09/30/integrate-dubbo-with-kubernetes/">Integrate Dubbo with Kubernetes</a>
        
      
      
      
        
          
          
          <a id="m-blog20180902how-to-prepare-an-apache-release" href="/blog/2018/09/02/how-to-prepare-an-apache-release/">How to prepare an Apache Release</a>
        
      
      
      
        
          
          
          <a id="m-blog20180902how-to-implement-a-fully-asynchronous-calls-chain-based-on-dubbo" href="/blog/2018/09/02/how-to-implement-a-fully-asynchronous-calls-chain-based-on-dubbo/">New Async Call</a>
        
      
      
      
        
          
          
          <a id="m-blog20180826the-fourth-dubbo-meetup-has-been-held-in-chengdu" href="/blog/2018/08/26/the-fourth-dubbo-meetup-has-been-held-in-chengdu/">The fourth Dubbo meetup</a>
        
      
      
      
        
          
          
          <a id="m-blog20180814dubbo-basic-usage-dubbo-consumer-configuration" href="/blog/2018/08/14/dubbo-basic-usage-dubbo-consumer-configuration/">Dubbo Consumer Configuration</a>
        
      
      
      
        
          
          
          <a id="m-blog20180814dubbo-several-ways-about-synchronousasynchronous-invoke" href="/blog/2018/08/14/dubbo-several-ways-about-synchronous/asynchronous-invoke/">Dubbo Invoke</a>
        
      
      
      
        
          
          
          <a id="m-blog20180814dubbo-basic-usage-dubbo-provider-configuration" href="/blog/2018/08/14/dubbo-basic-usage-dubbo-provider-configuration/">Dubbo Provider Configuration</a>
        
      
      
      
        
          
          
          <a id="m-blog20180814manipulating-services-dynamically-via-qos" href="/blog/2018/08/14/manipulating-services-dynamically-via-qos/">Dubbo QoS Introduction</a>
        
      
      
      
        
          
          
          <a id="m-blog20180814source-code-analysis-of-spring-boot-dubbo-app-start-and-stop" href="/blog/2018/08/14/source-code-analysis-of-spring-boot-dubbo-app-start-and-stop/">Dubbo start/stop in spring boot</a>
        
      
      
      
        
          
          
          <a id="m-blog20180814implementation-of-cross-language-calls-by-dubbo2js" href="/blog/2018/08/14/implementation-of-cross-language-calls-by-dubbo2.js/">dubbo2.js introduction</a>
        
      
      
      
        
          
          
          <a id="m-blog20180814generic-invoke-of-dubbo" class="active2" href="/blog/2018/08/14/generic-invoke-of-dubbo/">Generic invoke</a>
        
      
      
      
        
          
          
          <a id="m-blog20180810dubbos-load-balance" href="/blog/2018/08/10/dubbos-load-balance/">Dubbo&#39;s Load Balance</a>
        
      
      
      
        
          
          
          <a id="m-blog20180807use-annotations-in-dubbo" href="/blog/2018/08/07/use-annotations-in-dubbo/">Use Annotations In Dubbo</a>
        
      
      
      
        
          
          
          <a id="m-blog20180807using-zookeeper-in-dubbo" href="/blog/2018/08/07/using-zookeeper-in-dubbo/">Using Zookeeper in Dubbo</a>
        
      
      
      
        
          
          
          <a id="m-blog20180807dubbo-101" href="/blog/2018/08/07/dubbo-101/">Your First Dubbo Demo</a>
        
      
      
      
        
          
          
          <a id="m-blog20180730the-third-dubbo-meetup-has-been-held-in-shenzhen" href="/blog/2018/07/30/the-third-dubbo-meetup-has-been-held-in-shenzhen/">The third Dubbo meetup</a>
        
      
      
      
        
          
          
          <a id="m-blog20180727sentinel-the-flow-sentinel-of-dubbo-services" href="/blog/2018/07/27/sentinel-the-flow-sentinel-of-dubbo-services/">Introduce sentinel</a>
        
      
      
      
        
          
          
          <a id="m-blog20180712tracking-with-pinpoint" href="/blog/2018/07/12/tracking-with-pinpoint/">Tracking with Pinpoint</a>
        
      
      
      
        
          
          
          <a id="m-blog20180701your-first-dubbo-filter" href="/blog/2018/07/01/your-first-dubbo-filter/">Your First Dubbo Filter</a>
        
      
      
      
        
          
          
          <a id="m-blog20180623the-second-dubbo-shanghai-meetup-has-been-held-successfully" href="/blog/2018/06/23/the-second-dubbo-shanghai-meetup-has-been-held-successfully/">The second Dubbo meetup</a>
        
      
      
      
        
          
          
          <a id="m-blog20180512the-first-dubbo-meetup-has-been-held-in-beijing" href="/blog/2018/05/12/the-first-dubbo-meetup-has-been-held-in-beijing/">The first Dubbo meetup</a>
        
      
      
      
        
          
          
          <a id="m-blog20180502the-apachecon-na-schedule-has-been-announced" href="/blog/2018/05/02/the-apachecon-na-schedule-has-been-announced/">ApacheCon NA</a>
        
      
      
      
        
          
          
          <a id="m-blog20180425the-gsocgoogle-summer-of-code-2018" href="/blog/2018/04/25/the-gsocgoogle-summer-of-code-2018/">GSoC 2018</a>
        
      
      
      
        
          
          
          <a id="m-blog20180422dubbo-roadmap-is-announced-in-qcon-beijing-2018" href="/blog/2018/04/22/dubbo-roadmap-is-announced-in-qcon-beijing-2018/">QCon Beijing 2018</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/blog/releases/" >Releases</a>
  </li>
  <ul>
    <li class="collapse " id="blogreleases">
      
      
      
      
        
          
          
          <a id="m-blog20200518past-releases" href="/blog/2020/05/18/past-releases/">Past Releases</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

</div>

<script>
  $(function() {
    $("#sidebarConsoleBtn").click(function () {
      $("#sidebarContent").toggle();
    });
  });
</script>



  </div>
  <div class="col-md-2 blogDocToc">
    






<div class="td-page-meta">






<a href="https://github.com/nacos-group/nacos-group.github.io/issues/new?title=Generic%20invoke%20of%20Dubbo" target="_blank"><i class="fa fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/alibaba/nacos/issues/new" target="_blank"><i class="fa fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#generic-invoke-through-spring-xml-configuration">Generic invoke through Spring XML configuration</a></li>
    <li><a href="#generic-invoke-through-api-programming">Generic invoke through API programming</a></li>
    <li><a href="#the-case-where-parameters-or-return-values-are-pojos">The case where parameters or return values are POJOs</a></li>
    <li><a href="#generic-interface-implementation">Generic interface implementation</a>
      <ul>
        <li><a href="#implementation-genericservice-on-the-server">Implementation GenericService on the server</a></li>
        <li><a href="#server-exposed-service">Server exposed service</a></li>
        <li><a href="#service-invoke-on-the-consumer">Service invoke on the consumer</a></li>
      </ul>
    </li>
    <li><a href="#others">Others</a></li>
  </ul>
</nav>



  </div>
  <div class="row">
    <div class="col-md-2">
    </div>
    <div class="col-md-8 blogDocContent">
      <main role="main">
        <a class="btn btn-lg rssIcon" href="/blog/news/index.xml"
           target="_blank">
          RSS <i class="fa fa-rss ml-2 "></i>
        </a>
        


<div class="row">
  <div class="col-md-2">
    <ul>
      
    </ul>
  </div>
  <div class="col-md-10">
    
  </div>
</div>
<div class="td-content">
  <h1>Generic invoke of Dubbo</h1>
  
  <div class="lead">This article introduces you when and how to use generic invoke of Dubbo.</div>
  
  <div class="td-byline mb-4">
    <time datetime="2018-08-14" class="text-muted">Tuesday, August 14, 2018</time>
  </div>
  
  <h1 id="generic-invoke-of-dubbo">Generic invoke of Dubbo</h1>
<p>The generic invoke could be considered to be used in the following cases:</p>
<ul>
<li>Service test platform</li>
<li>API service gateway</li>
</ul>
<p>The generic invoke is mainly used when the consumer does not have an API interface; 
instead of depending the interface jar package, the service call is initiated directly through the GenericService interface, and all POJOs in the parameters and return values are represented by a <code>Map</code>. 
Generic invoke does not require attention on the server and can be exposed as normal services.</p>
<p>Next, let&rsquo;s take a look at how the consumer uses generic invoke for service call.</p>
<h2 id="generic-invoke-through-spring-xml-configuration">Generic invoke through Spring XML configuration</h2>
<p>Declare <code>generic=&quot;true&quot;</code> in Spring configuration, such as</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">&#34;userService&#34; interface=&#34;com.alibaba.dubbo.samples.generic.api.IUserService&#34; generic=&#34;true&#34;/&gt;
</code></pre></div><p>Where you need to use it, you can call it by forcing a type cast to GenericService.</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">GenericService userService <span style="color:#719e07">=</span> <span style="color:#719e07">(</span>GenericService<span style="color:#719e07">)</span> context<span style="color:#719e07">.</span>getBean<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;userService&#34;</span><span style="color:#719e07">);</span>
<span style="color:#586e75">// primary param and return value
</span><span style="color:#586e75"></span>String name <span style="color:#719e07">=</span> <span style="color:#719e07">(</span>String<span style="color:#719e07">)</span> userService<span style="color:#719e07">.</span>$invoke<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;delete&#34;</span><span style="color:#719e07">,</span> <span style="color:#719e07">new</span> String<span style="color:#719e07">[]{</span><span style="color:#dc322f">int</span><span style="color:#719e07">.</span>class<span style="color:#719e07">.</span>getName<span style="color:#719e07">()},</span> <span style="color:#719e07">new</span> Object<span style="color:#719e07">[]{</span>1<span style="color:#719e07">});</span>
System<span style="color:#719e07">.</span>out<span style="color:#719e07">.</span>println<span style="color:#719e07">(</span>name<span style="color:#719e07">);</span>
</code></pre></div><p>Among them,</p>
<ol>
<li>
<p>The interface GenericService has only one method, named $invoke, which takes three arguments, a method name, an array of method parameter types, and an array of parameter values.</p>
</li>
<li>
<p>For arrays of method parameter types</p>
<p>i.	If it is a basic type, such as int or long, use <code>int.class.getName()</code> to get its type;</p>
<p>ii. If it is a basic type array, such as int[], use <code>int[].class.getName()</code>;</p>
<p>iii.	If it is a POJO, use the full class name directly, such as <code>com.alibaba.dubbo.samples.generic.api.Params</code>.</p>
</li>
</ol>
<h2 id="generic-invoke-through-api-programming">Generic invoke through API programming</h2>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">ApplicationConfig application <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> ApplicationConfig<span style="color:#719e07">()</span>ApplicationConfig application <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> ApplicationConfig<span style="color:#719e07">();</span>
application<span style="color:#719e07">.</span>setName<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;api-generic-consumer&#34;</span><span style="color:#719e07">);</span>

RegistryConfig registry <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> RegistryConfig<span style="color:#719e07">();</span>
registry<span style="color:#719e07">.</span>setAddress<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;zookeeper://127.0.0.1:2181&#34;</span><span style="color:#719e07">);</span>

application<span style="color:#719e07">.</span>setRegistry<span style="color:#719e07">(</span>registry<span style="color:#719e07">);</span>

ReferenceConfig<span style="color:#719e07">&lt;</span>GenericService<span style="color:#719e07">&gt;</span> reference <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> ReferenceConfig<span style="color:#719e07">&lt;</span>GenericService<span style="color:#719e07">&gt;();</span>
<span style="color:#586e75">// weak type interface name
</span><span style="color:#586e75"></span>reference<span style="color:#719e07">.</span>setInterface<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;com.alibaba.dubbo.samples.generic.api.IUserService&#34;</span><span style="color:#719e07">);</span>
<span style="color:#586e75">// declared as a generalized interface
</span><span style="color:#586e75"></span>reference<span style="color:#719e07">.</span>setGeneric<span style="color:#719e07">(</span><span style="color:#cb4b16">true</span><span style="color:#719e07">);</span>

reference<span style="color:#719e07">.</span>setApplication<span style="color:#719e07">(</span>application<span style="color:#719e07">);</span>

<span style="color:#586e75">// replace all interface references with com.alibaba.dubbo.rpc.service.GenericService
</span><span style="color:#586e75"></span>GenericService genericService <span style="color:#719e07">=</span> reference<span style="color:#719e07">.</span>get<span style="color:#719e07">();</span>

String name <span style="color:#719e07">=</span> <span style="color:#719e07">(</span>String<span style="color:#719e07">)</span> genericService<span style="color:#719e07">.</span>$invoke<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;delete&#34;</span><span style="color:#719e07">,</span> <span style="color:#719e07">new</span> String<span style="color:#719e07">[]{</span><span style="color:#dc322f">int</span><span style="color:#719e07">.</span>class<span style="color:#719e07">.</span>getName<span style="color:#719e07">()},</span> <span style="color:#719e07">new</span> Object<span style="color:#719e07">[]{</span>1<span style="color:#719e07">});</span>
System<span style="color:#719e07">.</span>out<span style="color:#719e07">.</span>println<span style="color:#719e07">(</span>name<span style="color:#719e07">);</span>
</code></pre></div><p>Through the API, you don&rsquo;t need to configure the service in advance like XML. You can dynamically construct ReferenceConfig; the API is more common than XML.</p>
<h2 id="the-case-where-parameters-or-return-values-are-pojos">The case where parameters or return values are POJOs</h2>
<p>For example, the method signature is <code>User get(Params params)</code>, where <code>User</code> has two attributes, id and name, and <code>Params</code> has one attribute, query.</p>
<p>The following is the code of the consumer:</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">String<span style="color:#719e07">[]</span> parameterTypes <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> String<span style="color:#719e07">[]{</span><span style="color:#2aa198">&#34;com.alibaba.dubbo.samples.generic.api.Params&#34;</span><span style="color:#719e07">};</span>
Map<span style="color:#719e07">&lt;</span>String<span style="color:#719e07">,</span> Object<span style="color:#719e07">&gt;</span> params <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> HashMap<span style="color:#719e07">&lt;</span>String<span style="color:#719e07">,</span> Object<span style="color:#719e07">&gt;();</span>
param<span style="color:#719e07">.</span>put<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;class&#34;</span><span style="color:#719e07">,</span> <span style="color:#2aa198">&#34;com.alibaba.dubbo.samples.generic.api.Params&#34;</span><span style="color:#719e07">);</span>
param<span style="color:#719e07">.</span>put<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;query&#34;</span><span style="color:#719e07">,</span> <span style="color:#2aa198">&#34;a=b&#34;</span><span style="color:#719e07">);</span>
Object user <span style="color:#719e07">=</span> userService<span style="color:#719e07">.</span>$invoke<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;get&#34;</span><span style="color:#719e07">,</span> parameterTypes<span style="color:#719e07">,</span> <span style="color:#719e07">new</span> Object<span style="color:#719e07">[]{</span>param<span style="color:#719e07">});</span>
System<span style="color:#719e07">.</span>out<span style="color:#719e07">.</span>println<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;sample one result: &#34;</span> <span style="color:#719e07">+</span> user<span style="color:#719e07">);</span>
</code></pre></div><p>The output of the above code is:</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">sample one result: {name=charles, id=1, class=com.alibaba.dubbo.samples.generic.api.User}
</code></pre></div><p>Here, the Dubbo framework will automatically convert the return value from POJO to Map.
It can be seen that the return value <code>user</code> is a HashMap, which stores three k/vs, name, id, and class.</p>
<h2 id="generic-interface-implementation">Generic interface implementation</h2>
<p>The implementation of the generic interface is mainly used when the server does not have an API interface. All POJOs in the parameters and return values are represented by Map, which is usually used for framework integration. For example, to implement a generic remote service Mock framework, all service requests can be handled by implementing the interface GenericService.</p>
<h3 id="implementation-genericservice-on-the-server">Implementation GenericService on the server</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#268bd2">public</span> <span style="color:#268bd2">class</span> <span style="color:#268bd2">GenericServiceImpl</span> <span style="color:#268bd2">implements</span> GenericService <span style="color:#719e07">{</span>
    <span style="color:#268bd2">@Override</span>
    <span style="color:#268bd2">public</span> Object <span style="color:#268bd2">$invoke</span><span style="color:#719e07">(</span>String method<span style="color:#719e07">,</span> String<span style="color:#719e07">[]</span> parameterTypes<span style="color:#719e07">,</span> Object<span style="color:#719e07">[]</span> args<span style="color:#719e07">)</span> <span style="color:#268bd2">throws</span> GenericException <span style="color:#719e07">{</span>
        <span style="color:#719e07">if</span> <span style="color:#719e07">(</span>method<span style="color:#719e07">.</span>equals<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;hi&#34;</span><span style="color:#719e07">))</span> <span style="color:#719e07">{</span>
            <span style="color:#719e07">return</span> <span style="color:#2aa198">&#34;hi, &#34;</span> <span style="color:#719e07">+</span> args<span style="color:#719e07">[</span>0<span style="color:#719e07">];</span>
        <span style="color:#719e07">}</span> <span style="color:#719e07">else</span> <span style="color:#719e07">if</span> <span style="color:#719e07">(</span>method<span style="color:#719e07">.</span>equals<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;hello&#34;</span><span style="color:#719e07">))</span> <span style="color:#719e07">{</span>
            <span style="color:#719e07">return</span> <span style="color:#2aa198">&#34;hello, &#34;</span> <span style="color:#719e07">+</span> args<span style="color:#719e07">[</span>0<span style="color:#719e07">];</span>
        <span style="color:#719e07">}</span>

        <span style="color:#719e07">return</span> <span style="color:#2aa198">&#34;welcome&#34;</span><span style="color:#719e07">;</span>
    <span style="color:#719e07">}</span>
<span style="color:#719e07">}</span>
</code></pre></div><h3 id="server-exposed-service">Server exposed service</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">ApplicationConfig application <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> ApplicationConfig<span style="color:#719e07">();</span>
application<span style="color:#719e07">.</span>setName<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;api-generic-provider&#34;</span><span style="color:#719e07">);</span>

RegistryConfig registry <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> RegistryConfig<span style="color:#719e07">();</span>
registry<span style="color:#719e07">.</span>setAddress<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;zookeeper://127.0.0.1:2181&#34;</span><span style="color:#719e07">);</span>

application<span style="color:#719e07">.</span>setRegistry<span style="color:#719e07">(</span>registry<span style="color:#719e07">);</span>

GenericService genericService <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> GenericServiceImpl<span style="color:#719e07">();</span>

ServiceConfig<span style="color:#719e07">&lt;</span>GenericService<span style="color:#719e07">&gt;</span> service <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> ServiceConfig<span style="color:#719e07">&lt;</span>GenericService<span style="color:#719e07">&gt;();</span>
service<span style="color:#719e07">.</span>setApplication<span style="color:#719e07">(</span>application<span style="color:#719e07">);</span>
service<span style="color:#719e07">.</span>setInterface<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;com.alibaba.dubbo.samples.generic.api.HelloService&#34;</span><span style="color:#719e07">);</span>
service<span style="color:#719e07">.</span>setRef<span style="color:#719e07">(</span>genericService<span style="color:#719e07">);</span>
service<span style="color:#719e07">.</span>export<span style="color:#719e07">();</span>

ServiceConfig<span style="color:#719e07">&lt;</span>GenericService<span style="color:#719e07">&gt;</span> service2 <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> ServiceConfig<span style="color:#719e07">&lt;</span>GenericService<span style="color:#719e07">&gt;();</span>
service2<span style="color:#719e07">.</span>setApplication<span style="color:#719e07">(</span>application<span style="color:#719e07">);</span>
service2<span style="color:#719e07">.</span>setInterface<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;com.alibaba.dubbo.samples.generic.api.HiService&#34;</span><span style="color:#719e07">);</span>
service2<span style="color:#719e07">.</span>setRef<span style="color:#719e07">(</span>genericService<span style="color:#719e07">);</span>
service2<span style="color:#719e07">.</span>export<span style="color:#719e07">();</span>
</code></pre></div><p>Similarly, you can expose the service using XML configuration; in this case, the server does not depend on the two interfaces HiService and HelloService.</p>
<h3 id="service-invoke-on-the-consumer">Service invoke on the consumer</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">ApplicationConfig application <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> ApplicationConfig<span style="color:#719e07">();</span>
application<span style="color:#719e07">.</span>setName<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;api-generic-consumer&#34;</span><span style="color:#719e07">);</span>

RegistryConfig registry <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> RegistryConfig<span style="color:#719e07">();</span>
registry<span style="color:#719e07">.</span>setAddress<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;zookeeper://127.0.0.1:2181&#34;</span><span style="color:#719e07">);</span>

application<span style="color:#719e07">.</span>setRegistry<span style="color:#719e07">(</span>registry<span style="color:#719e07">);</span>

ReferenceConfig<span style="color:#719e07">&lt;</span>GenericService<span style="color:#719e07">&gt;</span> reference <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> ReferenceConfig<span style="color:#719e07">&lt;</span>GenericService<span style="color:#719e07">&gt;();</span>
<span style="color:#586e75">// weak type interface name
</span><span style="color:#586e75"></span>reference<span style="color:#719e07">.</span>setInterface<span style="color:#719e07">(</span>HiService<span style="color:#719e07">.</span>class<span style="color:#719e07">);</span>
reference<span style="color:#719e07">.</span>setApplication<span style="color:#719e07">(</span>application<span style="color:#719e07">);</span>

HiService hiService <span style="color:#719e07">=</span> <span style="color:#719e07">(</span>HiService<span style="color:#719e07">)</span> reference<span style="color:#719e07">.</span>get<span style="color:#719e07">();</span>
System<span style="color:#719e07">.</span>out<span style="color:#719e07">.</span>println<span style="color:#719e07">(</span>hiService<span style="color:#719e07">.</span>hi<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;dubbo&#34;</span><span style="color:#719e07">));</span>

ReferenceConfig<span style="color:#719e07">&lt;</span>GenericService<span style="color:#719e07">&gt;</span> reference2 <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> ReferenceConfig<span style="color:#719e07">&lt;</span>GenericService<span style="color:#719e07">&gt;();</span>
<span style="color:#586e75">// weak type interface name
</span><span style="color:#586e75"></span>reference2<span style="color:#719e07">.</span>setInterface<span style="color:#719e07">(</span>HelloService<span style="color:#719e07">.</span>class<span style="color:#719e07">);</span>
reference2<span style="color:#719e07">.</span>setApplication<span style="color:#719e07">(</span>application<span style="color:#719e07">);</span>

HelloService helloService <span style="color:#719e07">=</span> <span style="color:#719e07">(</span>HelloService<span style="color:#719e07">)</span> reference2<span style="color:#719e07">.</span>get<span style="color:#719e07">();</span>
System<span style="color:#719e07">.</span>out<span style="color:#719e07">.</span>println<span style="color:#719e07">(</span>helloService<span style="color:#719e07">.</span>hello<span style="color:#719e07">(</span><span style="color:#2aa198">&#34;community&#34;</span><span style="color:#719e07">));</span>
</code></pre></div><p>Similarly, the consumer can also reference the service using an XML configuration and then make the call. Here you can see that the calling method is a normal service call, not a generic call. Of course, it is also possible to use generic calls.</p>
<p>So far, a simple service Mock platform has been successfully launched!</p>
<h2 id="others">Others</h2>
<ul>
<li>The generic invoke and generic interface implementations introduced in this article are all based on the native Dubbo protocol. Prior to version 2.6.2, other protocols such as http/hessian don&rsquo;t support generic invoke. Version 2.6.3 will support the generic invoke of these two protocols.</li>
<li>The relevant sample codes mentioned in this article can be found in dubbo-samples: <a href="https://github.com/apache/dubbo-samples/tree/master/java/dubbo-samples-generic">https://github.com/apache/dubbo-samples/tree/master/java/dubbo-samples-generic</a></li>
</ul>

  
  
</div>


      </main>
    </div>
    <div class="col-md-2">
    </div>
  </div>
  
</section>

  

<footer id="footer" role="contentinfo">
  <div class="container">
    <img src="/images/nacos_gray.png"/>
    <div class="row">
      <div class="col-md-6"><h3>Vision</h3>
        <p>By providing an easy-to-use service infrastructure such as dynamic service
            discovery, service configuration, service sharing and management and etc., Nacos help users better
            construct, deliver and manage their own service platform, reuse and composite business service
            faster and deliver value of business innovation more quickly so as to win market for users in the
            era of cloud native and in all cloud environments, such as private, mixed, or public clouds.</p></div>
      <div class="col-md-3">
        <dl>
          <dt>Documentation</dt>
          
          <dd><a href="/en-us/docs/what-is-nacos.html" target="_self">Overview</a></dd>
          
          <dd><a href="/en-us/docs/quick-start.html" target="_self">Quick start</a></dd>
          
          <dd><a href="/en-us/docs/contributing.html" target="_self">Developer guide</a></dd>
          
        </dl>
      </div>
      <div class="col-md-3">
        <dl>
          <dt>Resources</dt>
          
          <dd><a href="/en-us/community/index.html" target="_self">Community</a></dd>
          
          <dd><a href="https://cn.aliyun.com/product/aliware/mse?spm=nacos-website.topbar.0.0.0" target="_self">Cloud Service MSE</a></dd>
          
          <dd><a href="https://www.aliyun.com/product/edas?source_type=nacos_pc_20181219" target="_self">Cloud Service EDAS</a></dd>
          
          <dd><a href="https://www.aliyun.com/product/ahas?source_type=nacos_pc_20190225" target="_self">Cloud Service AHAS</a></dd>
          
        </dl>
      </div>
    </div>
    <div class="col-md-12 text-center copyright">
      <span>© 2018 The Nacos Authors | An Alibaba Middleware (Aliware) Project</span>
    </div>
  </div>
</footer>


</body>
<script type="text/javascript">
  ;(function () {
    $('#fh5co-header').addClass('navbar-fixed-top fh5co-animated slideInDown');
    $('#nacosLogo').attr("src", "/images/nacos_colorful.png")
  }());
</script>
</html>