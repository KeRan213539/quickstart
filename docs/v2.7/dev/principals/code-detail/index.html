<!DOCTYPE html>






<html lang="en">
<head>
  

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> The Devil Is In The Details</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    
    <meta http-equiv="content-language" content="en-us" />

  

    
    
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Nacos">
    <meta property="og:title" content="The Devil Is In The Details">
    <meta property="og:url" content="/docs/v2.7/dev/principals/code-detail/">
    <meta property="og:image" content="/images/">
    <meta name="twitter:title" content="Nacos" />
    <meta name="twitter:url" content="/docs/v2.7/dev/principals/code-detail/" />
    <meta name="twitter:image" content="/images/" />
    <meta name="twitter:card" content="" />
    
    
    
    <link rel="canonical" href="/docs/v2.7/dev/principals/code-detail/"/>

    


    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600,400italic,700' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="/css/leaflet.css" />

    
    <link rel="stylesheet" href="/css/animate.css">
    
    <link rel="stylesheet" href="/css/icomoon.css">
    
    <link rel="stylesheet" href="/css/simple-line-icons.css">
    
    <link rel="stylesheet" href="/css/magnific-popup.css">
    
    <link rel="stylesheet" href="/css/bootstrap.css">

    
    <link rel="stylesheet" href="/css/style.css">

    
    
    <link rel="stylesheet" href="/css/custom1.css">
    
    <link rel="stylesheet" href="/css/custom2.css">
    
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    

    
    <script src="/js/modernizr-2.6.2.min.js"></script>
    
    

  <meta name="referrer" content="no-referrer"/>
  <link rel="shortcut icon" href="https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png"/>
  	
	<script src="/js/jquery.min.js"></script>
	
	<script src="/js/jquery.easing.1.3.js"></script>
	
	<script src="/js/bootstrap.min.js"></script>
	
	<script src="/js/jquery.waypoints.min.js"></script>
	
	<script src="/js/jquery.stellar.min.js"></script>
	
	<script src="/js/jquery.countTo.js"></script>
	
	<script src="/js/jquery.magnific-popup.min.js"></script>
	<script src="/js/magnific-popup-options.js"></script>
	


	
	<script src="/js/main.js"></script>

</head>
<body>


    <header role="banner" id="fh5co-header">
        <div class="container">
            
            <nav class="navbar navbar-default">
                <div class="navbar-header">
                    
                    <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><i></i></a>
                    <a class="navbar-brand" href="index.html"><img id="nacosLogo" src="/images/nacos.png"></a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                  <ul class="nav navbar-nav navbar-right">
                    
                    
                    
                    <li><a class="external" href="/"><span>Home</span></a></li>
                    
                    
                    

                    

                    

                    

                    

                    
                        <li class="active"><a class="external" href="/docs"><span>Documentation</span></a></li>
                    
                        <li><a class="external" href="/blog"><span>Blog</span></a></li>
                    
                    <li>
                      

<div class="dropdown">
	<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"
					aria-haspopup="true" aria-expanded="false" >
		English
		<span class="caret"></span>
	</button>
	<ul class="dropdown-menu">
		
		<li><a class="external" href="/zh/docs/v2.7/dev/principals/code-detail/">中文</a></li>
		
	</ul>
</div>
                    </li>
                </ul>
            </div>
        </nav>
        
    </div>
</header>

<section class="animated">
  <div class="col-md-2 blogDocSidebar">
    




<a href="#" id="sidebarConsoleBtn"><i class="fa fa-bars fa-fw"></i></a>
<div id="sidebarContent">
  
  






<ul>
  <li>
    <a href="/docs/" >Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/" >Dubbo 2.7</a>
  </li>
  <ul>
    <li class="collapse show" id="docsv27">
      
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/user/" >User</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27user">
      
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/user/preface/" >Preface</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27userpreface">
      
      
      
      
        
          
          
          <a id="m-docsv27userprefacebackground" href="/docs/v2.7/user/preface/background/">Background</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userprefacerequirements" href="/docs/v2.7/user/preface/requirements/">Requirements</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userprefacearchitecture" href="/docs/v2.7/user/preface/architecture/">Architecture</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userprefaceusage" href="/docs/v2.7/user/preface/usage/">Usage</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a id="m-docsv27userquick-start" href="/docs/v2.7/user/quick-start/">Quick start</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userdependencies" href="/docs/v2.7/user/dependencies/">Dependencies</a>
        
      
      
      
        
          
          
          <a id="m-docsv27usermaturity" href="/docs/v2.7/user/maturity/">Maturity</a>
        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/user/configuration/" >Configuration</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27userconfiguration">
      
      
      
      
        
          
          
          <a id="m-docsv27userconfigurationxml" href="/docs/v2.7/user/configuration/xml/">XML</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userconfigurationproperties" href="/docs/v2.7/user/configuration/properties/">Properties</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userconfigurationapi" href="/docs/v2.7/user/configuration/api/">API</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userconfigurationannotation" href="/docs/v2.7/user/configuration/annotation/">Annotation</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userconfigurationconfiguration-load-process" href="/docs/v2.7/user/configuration/configuration-load-process/">Loading Process</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/user/examples/" >Examples</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27userexamples">
      
      
      
      
        
          
          
          <a id="m-docsv27userexamplespreflight-check" href="/docs/v2.7/user/examples/preflight-check/">Preflight Check</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesfault-tolerent-strategy" href="/docs/v2.7/user/examples/fault-tolerent-strategy/">Fault Tolerance</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesloadbalance" href="/docs/v2.7/user/examples/loadbalance/">Load Balance</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesthread-model" href="/docs/v2.7/user/examples/thread-model/">Thread Model</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesexplicit-target" href="/docs/v2.7/user/examples/explicit-target/">Explicit Target</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplessubscribe-only" href="/docs/v2.7/user/examples/subscribe-only/">Subscribe Only</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesmulti-protocols" href="/docs/v2.7/user/examples/multi-protocols/">Multiple Protocols</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesmulti-registry" href="/docs/v2.7/user/examples/multi-registry/">Multiple Registries</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesservice-group" href="/docs/v2.7/user/examples/service-group/">Service Group</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesstatic-service" href="/docs/v2.7/user/examples/static-service/">Static Service</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesmulti-versions" href="/docs/v2.7/user/examples/multi-versions/">Multiple Versions</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesgroup-merger" href="/docs/v2.7/user/examples/group-merger/">Group Merger</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesparameter-validation" href="/docs/v2.7/user/examples/parameter-validation/">Parameter Validation</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesresult-cache" href="/docs/v2.7/user/examples/result-cache/">Cache Result</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesgeneric-reference" href="/docs/v2.7/user/examples/generic-reference/">Generic Reference</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesgeneric-service" href="/docs/v2.7/user/examples/generic-service/">Generic Service</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesecho-service" href="/docs/v2.7/user/examples/echo-service/">Echo Service</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplescontext" href="/docs/v2.7/user/examples/context/">Context</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesattachment" href="/docs/v2.7/user/examples/attachment/">Attachment</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesasync-call" href="/docs/v2.7/user/examples/async-call/">Async Call</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesasync-execute-on-provider" href="/docs/v2.7/user/examples/async-execute-on-provider/">Async Execution</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexampleslocal-call" href="/docs/v2.7/user/examples/local-call/">Local Call</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplescallback-parameter" href="/docs/v2.7/user/examples/callback-parameter/">Callback</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesevents-notify" href="/docs/v2.7/user/examples/events-notify/">Event Notification</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexampleslocal-stub" href="/docs/v2.7/user/examples/local-stub/">Local Stub</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexampleslocal-mock" href="/docs/v2.7/user/examples/local-mock/">Local Mock</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesdelay-publish" href="/docs/v2.7/user/examples/delay-publish/">Delay Publish</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesconcurrency-control" href="/docs/v2.7/user/examples/concurrency-control/">Concurrency</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesconfig-connections" href="/docs/v2.7/user/examples/config-connections/">Connection</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexampleslazy-connect" href="/docs/v2.7/user/examples/lazy-connect/">Lazy Connect</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesstickiness" href="/docs/v2.7/user/examples/stickiness/">Stickiness</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplestoken-authorization" href="/docs/v2.7/user/examples/token-authorization/">Token Authorization</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesrouting-rule" href="/docs/v2.7/user/examples/routing-rule/">Routing Rule</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesconfig-rule" href="/docs/v2.7/user/examples/config-rule/">Configure rule</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesservice-downgrade" href="/docs/v2.7/user/examples/service-downgrade/">Service Downgrade</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesgraceful-shutdown" href="/docs/v2.7/user/examples/graceful-shutdown/">Graceful Shutdown</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexampleshostname-binding" href="/docs/v2.7/user/examples/hostname-binding/">Hostname Binding</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexampleslogger-strategy" href="/docs/v2.7/user/examples/logger-strategy/">Logger Strategy</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesaccesslog" href="/docs/v2.7/user/examples/accesslog/">Access Log</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesservice-container" href="/docs/v2.7/user/examples/service-container/">Service Container</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesreference-config-cache" href="/docs/v2.7/user/examples/reference-config-cache/">ReferenceConfig Cache</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesregistry-only" href="/docs/v2.7/user/examples/registry-only/">Register Only</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesdistributed-transaction" href="/docs/v2.7/user/examples/distributed-transaction/">Transaction</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesdump" href="/docs/v2.7/user/examples/dump/">Thread Dump</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesnetty4" href="/docs/v2.7/user/examples/netty4/">Netty4</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userexamplesserialization" href="/docs/v2.7/user/examples/serialization/">Serialization</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/user/references/" >References</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27userreferences">
      
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/user/references/xml/" >XML</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27userreferencesxml">
      
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-application" href="/docs/v2.7/user/references/xml/dubbo-application/">dubbo:application</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-argument" href="/docs/v2.7/user/references/xml/dubbo-argument/">dubbo:argument</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-config-center" href="/docs/v2.7/user/references/xml/dubbo-config-center/">dubbo:config-center</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-consumer" href="/docs/v2.7/user/references/xml/dubbo-consumer/">dubbo:consumer</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-method" href="/docs/v2.7/user/references/xml/dubbo-method/">dubbo:method</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-module" href="/docs/v2.7/user/references/xml/dubbo-module/">dubbo:module</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-monitor" href="/docs/v2.7/user/references/xml/dubbo-monitor/">dubbo:monitor</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-parameter" href="/docs/v2.7/user/references/xml/dubbo-parameter/">dubbo:parameter</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-protocol" href="/docs/v2.7/user/references/xml/dubbo-protocol/">dubbo:protocol</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-provider" href="/docs/v2.7/user/references/xml/dubbo-provider/">dubbo:provider</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-reference" href="/docs/v2.7/user/references/xml/dubbo-reference/">dubbo:reference</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-registry" href="/docs/v2.7/user/references/xml/dubbo-registry/">dubbo:registry</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesxmldubbo-service" href="/docs/v2.7/user/references/xml/dubbo-service/">dubbo:service</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/user/references/protocol/" >Protocol</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27userreferencesprotocol">
      
      
      
      
        
          
          
          <a id="m-docsv27userreferencesprotocoldubbo" href="/docs/v2.7/user/references/protocol/dubbo/">dubbo://</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesprotocolrest" href="/docs/v2.7/user/references/protocol/rest/">rest://</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesprotocolhttp" href="/docs/v2.7/user/references/protocol/http/">http://</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesprotocolhessian" href="/docs/v2.7/user/references/protocol/hessian/">hessian://</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesprotocolredis" href="/docs/v2.7/user/references/protocol/redis/">redis://</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesprotocolthrift" href="/docs/v2.7/user/references/protocol/thrift/">thrift://</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesprotocolmemcached" href="/docs/v2.7/user/references/protocol/memcached/">memcached://</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesprotocolrmi" href="/docs/v2.7/user/references/protocol/rmi/">rmi://</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesprotocolwebservice" href="/docs/v2.7/user/references/protocol/webservice/">webservice://</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/user/references/registry/" >Registry Server</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27userreferencesregistry">
      
      
      
      
        
          
          
          <a id="m-docsv27userreferencesregistrynacos" href="/docs/v2.7/user/references/registry/nacos/">Nacos</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesregistryzookeeper" href="/docs/v2.7/user/references/registry/zookeeper/">Zookeeper</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesregistrymulticast" href="/docs/v2.7/user/references/registry/multicast/">Multicast</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesregistryredis" href="/docs/v2.7/user/references/registry/redis/">Redis</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesregistrysimple" href="/docs/v2.7/user/references/registry/simple/">Simple</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesmetadata" href="/docs/v2.7/user/references/metadata/">Metadata</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesapi" href="/docs/v2.7/user/references/api/">API</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesqos" href="/docs/v2.7/user/references/qos/">Qos</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencestelnet" href="/docs/v2.7/user/references/telnet/">Telnet</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userreferencesmaven" href="/docs/v2.7/user/references/maven/">Maven</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a id="m-docsv27userbest-practice" href="/docs/v2.7/user/best-practice/">Best practice</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userrecommend" href="/docs/v2.7/user/recommend/">Recommended usage</a>
        
      
      
      
        
          
          
          <a id="m-docsv27usercapacity-plan" href="/docs/v2.7/user/capacity-plan/">Capacity plan</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userperf-test" href="/docs/v2.7/user/perf-test/">Performance</a>
        
      
      
      
        
          
          
          <a id="m-docsv27usercoveragence" href="/docs/v2.7/user/coveragence/">Test coverage</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userbenchmark-tool" href="/docs/v2.7/user/benchmark-tool/">Benchmark Suite</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userrest" href="/docs/v2.7/user/rest/">REST support</a>
        
      
      
      
        
          
          
          <a id="m-docsv27usersimple-monitor" href="/docs/v2.7/user/simple-monitor/">Simple monitor</a>
        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/user/languages/" >Other Languages</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27userlanguages">
      
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/user/languages/erlang/" >Erlang</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27userlanguageserlang">
      
      
      
      
        
          
          
          <a id="m-docsv27userlanguageserlangquick-start" href="/docs/v2.7/user/languages/erlang/quick-start/">Quick Start</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userlanguageserlangreference" href="/docs/v2.7/user/languages/erlang/reference/">Consumer</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userlanguageserlangservice" href="/docs/v2.7/user/languages/erlang/service/">Provider</a>
        
      
      
      
        
          
          
          <a id="m-docsv27userlanguageserlangserialization" href="/docs/v2.7/user/languages/erlang/serialization/">Protocol</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/dev/" >Developer</a>
  </li>
  <ul>
    <li class="collapse show" id="docsv27dev">
      
      
      
      
        
          
          
          <a id="m-docsv27devbuild" href="/docs/v2.7/dev/build/">Build</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devdesign" href="/docs/v2.7/dev/design/">Design</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devspi" href="/docs/v2.7/dev/spi/">SPI</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplementation" href="/docs/v2.7/dev/implementation/">Implementation</a>
        
      
      
      
        
          






<ul>
  <li>
    <a class="active" href="/docs/v2.7/dev/principals/" >Design Principals</a>
  </li>
  <ul>
    <li class="collapse show" id="docsv27devprincipals">
      
      
      
      
        
          
          
          <a id="m-docsv27devprincipalscode-detail" class="active2" href="/docs/v2.7/dev/principals/code-detail/">Details</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devprincipalsconfiguration" href="/docs/v2.7/dev/principals/configuration/">Configuration</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devprincipalsdummy" href="/docs/v2.7/dev/principals/dummy/">Fool-proof</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devprincipalsexpansibility" href="/docs/v2.7/dev/principals/expansibility/">Extensibility</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devprincipalsextension" href="/docs/v2.7/dev/principals/extension/">Extension</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devprincipalsgeneral-knowledge" href="/docs/v2.7/dev/principals/general-knowledge/">General Rule</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devprincipalsrobustness" href="/docs/v2.7/dev/principals/robustness/">Robustness</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/dev/impls/" >SPI Impls</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27devimpls">
      
      
      
      
        
          
          
          <a id="m-docsv27devimplsprotocol" href="/docs/v2.7/dev/impls/protocol/">Protocol</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsfilter" href="/docs/v2.7/dev/impls/filter/">Filter</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsinvoker-listener" href="/docs/v2.7/dev/impls/invoker-listener/">InvokerListener</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsexporter-listener" href="/docs/v2.7/dev/impls/exporter-listener/">ExporterListener</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplscluster" href="/docs/v2.7/dev/impls/cluster/">Cluster</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsrouter" href="/docs/v2.7/dev/impls/router/">Router</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsload-balance" href="/docs/v2.7/dev/impls/load-balance/">LoadBalance</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsmerger" href="/docs/v2.7/dev/impls/merger/">Merger</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsregistry" href="/docs/v2.7/dev/impls/registry/">Registry</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsmonitor" href="/docs/v2.7/dev/impls/monitor/">Monitor</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsextension-factory" href="/docs/v2.7/dev/impls/extension-factory/">ExtensionFactory</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsproxy-factory" href="/docs/v2.7/dev/impls/proxy-factory/">ProxyFactory</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplscompiler" href="/docs/v2.7/dev/impls/compiler/">Compiler</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsconfig-center" href="/docs/v2.7/dev/impls/config-center/">Config Center</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsdispatcher" href="/docs/v2.7/dev/impls/dispatcher/">Dispatcher</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsthreadpool" href="/docs/v2.7/dev/impls/threadpool/">ThreadPool</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsserialize" href="/docs/v2.7/dev/impls/serialize/">Serialization</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsremoting" href="/docs/v2.7/dev/impls/remoting/">Transporter</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsexchanger" href="/docs/v2.7/dev/impls/exchanger/">Exchanger</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsnetworker" href="/docs/v2.7/dev/impls/networker/">Networker</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplstelnet-handler" href="/docs/v2.7/dev/impls/telnet-handler/">TelnetHandler</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsstatus-checker" href="/docs/v2.7/dev/impls/status-checker/">StatusChecker</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplscontainer" href="/docs/v2.7/dev/impls/container/">Container</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplspage" href="/docs/v2.7/dev/impls/page/">PageHandler</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplscache" href="/docs/v2.7/dev/impls/cache/">Cache</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplsvalidation" href="/docs/v2.7/dev/impls/validation/">Validation</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devimplslogger-adapter" href="/docs/v2.7/dev/impls/logger-adapter/">LoggerAdapter</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a id="m-docsv27devcontract" href="/docs/v2.7/dev/contract/">Public Agreement</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devrelease" href="/docs/v2.7/dev/release/">Versions</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devchecklist" href="/docs/v2.7/dev/checklist/">Checklist</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devcode-smell" href="/docs/v2.7/dev/code-smell/">Bad Smell</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devcoding" href="/docs/v2.7/dev/coding/">Coding Convention</a>
        
      
      
      
        
          
          
          <a id="m-docsv27devtck" href="/docs/v2.7/dev/tck/">TCK</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/admin/" >Admin</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27admin">
      
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/admin/ops/" >Dubbo Admin</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27adminops">
      
      
      
      
        
          
          
          <a id="m-docsv27adminopsfunctions" href="/docs/v2.7/admin/ops/functions/">Functions</a>
        
      
      
      
        
          
          
          <a id="m-docsv27adminopsintroduction" href="/docs/v2.7/admin/ops/introduction/">Introductions</a>
        
      
      
      
        
          
          
          <a id="m-docsv27adminopssearch" href="/docs/v2.7/admin/ops/search/">Search</a>
        
      
      
      
        
          
          
          <a id="m-docsv27adminopstest" href="/docs/v2.7/admin/ops/test/">Test</a>
        
      
      
      
        
          
          
          <a id="m-docsv27adminopsapidocs" href="/docs/v2.7/admin/ops/apidocs/">API Docs&amp;Test</a>
        
      
      
      
        
          
          
          <a id="m-docsv27adminopsgovernance" href="/docs/v2.7/admin/ops/governance/">Governance</a>
        
      
      
      
        
          
          
          <a id="m-docsv27adminopspinpoint" href="/docs/v2.7/admin/ops/pinpoint/">Pinpoint</a>
        
      
      
      
        
          
          
          <a id="m-docsv27adminopsskywalking" href="/docs/v2.7/admin/ops/skywalking/">Skywalking</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v2.7/admin/install/" >Installation</a>
  </li>
  <ul>
    <li class="collapse " id="docsv27admininstall">
      
      
      
      
        
          
          
          <a id="m-docsv27admininstalladmin-console" href="/docs/v2.7/admin/install/admin-console/">Admin Console</a>
        
      
      
      
        
          
          
          <a id="m-docsv27admininstallprovider-demo" href="/docs/v2.7/admin/install/provider-demo/">Demo Provider</a>
        
      
      
      
        
          
          
          <a id="m-docsv27admininstallconsumer-demo" href="/docs/v2.7/admin/install/consumer-demo/">Demo Consumer</a>
        
      
      
      
        
          
          
          <a id="m-docsv27admininstallzookeeper" href="/docs/v2.7/admin/install/zookeeper/">Config Center</a>
        
      
      
      
        
          
          
          <a id="m-docsv27admininstallredis" href="/docs/v2.7/admin/install/redis/">Register Center</a>
        
      
      
      
        
          
          
          <a id="m-docsv27admininstallmonitor-center" href="/docs/v2.7/admin/install/monitor-center/">Monitor Center</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/v3.0/" >Dubbo 3.0</a>
  </li>
  <ul>
    <li class="collapse " id="docsv30">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/contribution-guidelines/" >Contribution Guideline</a>
  </li>
  <ul>
    <li class="collapse " id="docscontribution-guidelines">
      
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/contribution-guidelines/contributor/" >Contributor</a>
  </li>
  <ul>
    <li class="collapse " id="docscontribution-guidelinescontributor">
      
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescontributorbecome-a-committer_dev" href="/docs/contribution-guidelines/contributor/become-a-committer_dev/">How To</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescontributorcla-signing-guide_dev" href="/docs/contribution-guidelines/contributor/cla-signing-guide_dev/">CLA</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescontributornew-contributor-guide_dev" href="/docs/contribution-guidelines/contributor/new-contributor-guide_dev/">New Contributor</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescontributormailing-list-subscription-guide_dev" href="/docs/contribution-guidelines/contributor/mailing-list-subscription-guide_dev/">Mailing List</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescontributorsoftware-donation-guide_dev" href="/docs/contribution-guidelines/contributor/software-donation-guide_dev/">Donation</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescontributorreporting-security-issues_dev" href="/docs/contribution-guidelines/contributor/reporting-security-issues_dev/">Security Issue</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescontributordubbo-extension-guide_dev" href="/docs/contribution-guidelines/contributor/dubbo-extension-guide_dev/">Developing Extension</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescontributortest-coverage-guide_dev" href="/docs/contribution-guidelines/contributor/test-coverage-guide_dev/">Test Coverage</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul>
  <li>
    <a href="/docs/contribution-guidelines/committer/" >Committer</a>
  </li>
  <ul>
    <li class="collapse " id="docscontribution-guidelinescommitter">
      
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescommitternew-committer-guide_dev" href="/docs/contribution-guidelines/committer/new-committer-guide_dev/">Committer Guide</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescommitterrelease-guide_dev" href="/docs/contribution-guidelines/committer/release-guide_dev/">Release Guide</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescommitterlabel-an-issue-guide_dev" href="/docs/contribution-guidelines/committer/label-an-issue-guide_dev/">Issue Guide</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescommitterwebsite-guide_dev" href="/docs/contribution-guidelines/committer/website-guide_dev/">Website Guide</a>
        
      
      
      
        
          
          
          <a id="m-docscontribution-guidelinescommitterapache-dubbo-page_dev" href="/docs/contribution-guidelines/committer/apache-dubbo-page_dev/">Official Page</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

</div>

<script>
  $(function() {
    $("#sidebarConsoleBtn").click(function () {
      $("#sidebarContent").toggle();
    });
  });
</script>



  </div>
  <div class="col-md-2 blogDocToc">
    






<div class="td-page-meta">






<a href="https://github.com/nacos-group/nacos-group.github.io/issues/new?title=The%20Devil%20Is%20In%20The%20Details" target="_blank"><i class="fa fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/alibaba/nacos/issues/new" target="_blank"><i class="fa fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#prevent-null-pointer-dereference-and-index-out-of-bounds">Prevent null pointer dereference and index out of bounds</a></li>
    <li><a href="#ensure-thread-safety-and-visibility">Ensure thread safety and visibility</a></li>
    <li><a href="#fail-fast-and-precondition">Fail fast and precondition</a></li>
    <li><a href="#separate-reliable-operation-and-unreliable-operation">Separate reliable operation and unreliable operation</a></li>
    <li><a href="#safeguard-against-exceptions-but-does-not-ignore-exceptions">Safeguard against exceptions, but does not ignore exceptions</a></li>
    <li><a href="#reduce-scope-of-variable-and-use-final-liberally">Reduce scope of variable and use final liberally</a></li>
    <li><a href="#reduce-misunderstanding-when-modifying-do-not-bury-mine">Reduce misunderstanding when modifying, do not bury mine</a></li>
    <li><a href="#improve-code-testability">Improve code testability</a></li>
  </ul>
</nav>



  </div>
  <div class="row">
    <div class="col-md-2">
    </div>
    <div class="col-md-8 blogDocContent">
      


<div class="row">
  <div class="col-md-2">
    <ul>
      
    </ul>
  </div>
  <div class="col-md-10">
    
  </div>
</div>
<div class="td-content">
  <h1>The Devil Is In The Details</h1>
  
  <div class="td-byline mb-4">
    <time datetime="0001-01-01" class="text-muted">Monday, January 01, 0001</time>
  </div>
  
  <blockquote>
<p><a href="http://javatar.iteye.com/blog/1056664">http://javatar.iteye.com/blog/1056664</a></p>
</blockquote>
<p>Recently, I have been worried about the quality of the Dubbo distributed service framework. If there are more maintenance personnel or changes, there will be a decline in quality. I am thinking, is there any need for everyone to abide by it, according to a habit when writing code, I have summarized it. The code process, especially the framework code, should always keep in mind the details. Maybe the following will be said, everyone will feel very simple, very basic, but always keep in mind. Considering these factors in every line of code requires a lot of patience. It is often said that the devil is in the details.</p>
<h2 id="prevent-null-pointer-dereference-and-index-out-of-bounds">Prevent null pointer dereference and index out of bounds</h2>
<p>This is the exception I least like to see, especially in the core framework, in contrast I would like to see a parameter not legal exception with detail information. This is also a robust program developer who should be prevented in the subconscious by writing every line of code. Basically, you must be able to ensure that the code that is written once will not appear in the case of no test.</p>
<h2 id="ensure-thread-safety-and-visibility">Ensure thread safety and visibility</h2>
<p>For framework developers, a deep understanding of thread safety and visibility is the most basic requirement. Developers are required to ensure that they are correct in the subconscious when writing each line of code. Because of this kind of code, it will look normal when doing functional tests under small concurrency. However, under high concurrency, there will be inexplicable problems, and the scene is difficult to reproduce, and it is extremely difficult to check.</p>
<h2 id="fail-fast-and-precondition">Fail fast and precondition</h2>
<p>Fail fast should also become a subconscious mind, assert at the entrance when there are incoming parameters and state changes. An illegal value and state should be reported at the first time, rather than waiting until the time is needed. Because when it is time to use, other related states may have been modified before, and few people in the program handle the rollback logic. After this error, the internal state may be confusing, and it is easy to cause the program to be unrecoverable on a hidden branch.</p>
<h2 id="separate-reliable-operation-and-unreliable-operation">Separate reliable operation and unreliable operation</h2>
<p>The reliability here is narrowly defined whether it will throw an exception or cause a state inconsistency. For example, writing a thread-safe Map can be considered reliable, but writing to a database can be considered unreliable. Developers must pay attention to its reliability when writing each line of code, divide it as much as possible in the code, and handle exceptions for failures, and provide clear logic for fault-tolerant, self-protection, automatic recovery or switching. The entry point ensures that the code that is subsequently added is not misplaced, and the original fault-tolerant processing is confusing.</p>
<h2 id="safeguard-against-exceptions-but-does-not-ignore-exceptions">Safeguard against exceptions, but does not ignore exceptions</h2>
<p>The exception defense mentioned here refers to the maximum tolerance of the code on the non-crucial path, including the bug on the program. For example, the version number of program is retrieved by scanning the Manifest and jar package names. This logic is auxiliary, but the code is quite a bit. Although the initial test works well but you should add a try-catch block to cover the whole getVersion() function, if something goes wrong then print error message and return the basic version. Because getVersion() may encounter exception for specific unknown scene, or other developers mistakenly modify the logic (usually they won&rsquo;t remove try-catch). Otherwise if it throws an exception, the main process will be interrupted which we don&rsquo;t want to see. It should be controlled properly, do not abuse try-catch, and do not eat the exception silently.</p>
<h2 id="reduce-scope-of-variable-and-use-final-liberally">Reduce scope of variable and use final liberally</h2>
<p>If a class can be an Immutable Class, it is preferred to design it as an Immutable Class. The immutable class has natural concurrency advantages, reduce synchronization and replication, it can efficiently help analyze the scope of thread safety. Even if a mutable class, for references passed in from constructor then held internally, it is better to make this field final, so as not to be mistakenly modified. Don&rsquo;t assume that the field won&rsquo;t be reassigned if this field is private or this class is written by myself. One factor to consider is that this code may be modified by others. He may not aware your weak convention， and the Final is a invariant contract.</p>
<h2 id="reduce-misunderstanding-when-modifying-do-not-bury-mine">Reduce misunderstanding when modifying, do not bury mine</h2>
<p>It is repeatedly mentioned that the code being modified by the others, and this is something developers should keep in mind. This other person includes the future of yourself, you always have to think about this code, someone may change it. I should give the modified person a hint, let him know my current design intent, instead of adding hidden rules in the program, or bury some easily overlooked mines, such as: use null to indicate that it is not available, the size is equal to 0 means black list, this is a mine. The next modifier, including yourself, will not remember to have such an agreement, may later change some of the other bugs, accidentally changed to here, directly detonated the fault. For this example, one principle is to never distinguish between null references and null values.</p>
<h2 id="improve-code-testability">Improve code testability</h2>
<p>The testability here mainly refers to the ease of Mock and the isolation of the test cases. As for the automation, repeatability, stability, disorder, completeness (full coverage), lightweight (fast execution) of the test, the general developer, plus the assist of tools such as JUnit can do it. Can also understand its benefits, just the matter of workload. Primary emphasis on unicity(only test the target class itself) and isolation(do not propagate failure). Nowadays there is too much emphasis on completeness, a lot of crossed and repeated test cases. It seems fine, but the more test code, the higher maintenance cost. A common problem is that modifying a line of code or adding an assertion causes more than 100 test cases to fail. It will cost a lot of time to fix these variance test cases. Over time, this test cases can&rsquo;t really reflect the current state of the code, and it will often be compromised to bypass. In the best case, modify a line of code, and only one line of test code does not pass. If the code is modified and the test case can still pass, that doesn&rsquo;t work, indicating that the scenario is not covered. In addition, Mockability is the basis of isolation, it hide the logic of indirect dependencies. One of the biggest killers of Mockability is the static method, which should be avoid as possible.</p>

  
  
</div>


    </div>
    <div class="col-md-2">
    </div>
  </div>
  
</section>

  

<footer id="footer" role="contentinfo">
  <div class="container">
    <img src="/images/nacos_gray.png"/>
    <div class="row">
      <div class="col-md-6"><h3>Vision</h3>
        <p>By providing an easy-to-use service infrastructure such as dynamic service
            discovery, service configuration, service sharing and management and etc., Nacos help users better
            construct, deliver and manage their own service platform, reuse and composite business service
            faster and deliver value of business innovation more quickly so as to win market for users in the
            era of cloud native and in all cloud environments, such as private, mixed, or public clouds.</p></div>
      <div class="col-md-3">
        <dl>
          <dt>Documentation</dt>
          
          <dd><a href="/en-us/docs/what-is-nacos.html" target="_self">Overview</a></dd>
          
          <dd><a href="/en-us/docs/quick-start.html" target="_self">Quick start</a></dd>
          
          <dd><a href="/en-us/docs/contributing.html" target="_self">Developer guide</a></dd>
          
        </dl>
      </div>
      <div class="col-md-3">
        <dl>
          <dt>Resources</dt>
          
          <dd><a href="/en-us/community/index.html" target="_self">Community</a></dd>
          
          <dd><a href="https://cn.aliyun.com/product/aliware/mse?spm=nacos-website.topbar.0.0.0" target="_self">Cloud Service MSE</a></dd>
          
          <dd><a href="https://www.aliyun.com/product/edas?source_type=nacos_pc_20181219" target="_self">Cloud Service EDAS</a></dd>
          
          <dd><a href="https://www.aliyun.com/product/ahas?source_type=nacos_pc_20190225" target="_self">Cloud Service AHAS</a></dd>
          
        </dl>
      </div>
    </div>
    <div class="col-md-12 text-center copyright">
      <span>© 2018 The Nacos Authors | An Alibaba Middleware (Aliware) Project</span>
    </div>
  </div>
</footer>


</body>
<script type="text/javascript">
  ;(function () {
    $('#fh5co-header').addClass('navbar-fixed-top fh5co-animated slideInDown');
    $('#nacosLogo').attr("src", "/images/nacos_colorful.png")
  }());
</script>
</html>