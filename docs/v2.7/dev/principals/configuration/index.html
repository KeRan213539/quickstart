<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>The Configuration Design</title><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en-us"><meta property="og:type" content="website"><meta property="og:site_name" content="Nacos"><meta property="og:title" content="The Configuration Design"><meta property="og:url" content="/docs/v2.7/dev/principals/configuration/"><meta property="og:image" content="/images/"><meta name=twitter:title content="Nacos"><meta name=twitter:url content="/docs/v2.7/dev/principals/configuration/"><meta name=twitter:image content="/images/"><meta name=twitter:card content><link rel=canonical href=/docs/v2.7/dev/principals/configuration/><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600,400italic,700" rel=stylesheet type=text/css><link rel=stylesheet href=/css/leaflet.css><link rel=stylesheet href=/css/animate.css><link rel=stylesheet href=/css/icomoon.css><link rel=stylesheet href=/css/simple-line-icons.css><link rel=stylesheet href=/css/magnific-popup.css><link rel=stylesheet href=/css/bootstrap.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom1.css><link rel=stylesheet href=/css/custom2.css><link rel=stylesheet href=/css/font-awesome.min.css><script src=/js/modernizr-2.6.2.min.js></script><meta name=referrer content="no-referrer"><link rel="shortcut icon" href=https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png><script src=/js/jquery.min.js></script><script src=/js/jquery.easing.1.3.js></script><script src=/js/bootstrap.min.js></script><script src=/js/jquery.waypoints.min.js></script><script src=/js/jquery.stellar.min.js></script><script src=/js/jquery.countTo.js></script><script src=/js/jquery.magnific-popup.min.js></script><script src=/js/magnific-popup-options.js></script><script src=/js/main.js></script></head><body><header role=banner id=fh5co-header><div class=container><nav class="navbar navbar-default"><div class=navbar-header><a href=# class="js-fh5co-nav-toggle fh5co-nav-toggle" data-toggle=collapse data-target=#navbar aria-expanded=false aria-controls=navbar><i></i></a><a class=navbar-brand href=index.html><img id=nacosLogo src=/images/nacos.png></a></div><div id=navbar class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a class=external href=/><span>Home</span></a></li><li class=active><a class=external href=/docs><span>Documentation</span></a></li><li><a class=external href=/blog><span>Blog</span></a></li><li><a class=external href=/community><span>Community</span></a></li><li><a class=external href="https://cn.aliyun.com/product/aliware/mse?spm=nacos-website.topbar.0.0.0"><span>Naco In Cloud</span></a>
<img class=menu-img src=https://img.alicdn.com/tfs/TB1esl_m.T1gK0jSZFrXXcNCXXa-200-200.png></li><li><a class=external href=http://console.nacos.io/nacos/index.html><span>Demo-Console</span></a></li><li><div class=dropdown><button class="btn btn-default dropdown-toggle" type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
<span class=caret></span></button><ul class=dropdown-menu><li><a class=external href=/zh/docs/v2.7/dev/principals/configuration/>中文</a></li></ul></div></li><li><div class=navbar-nav><input type=search class="form-control nav-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off>
<script src=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js></script><link href=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.css rel=stylesheet><script>docsearch({appId:"3CRHI0VEW6",apiKey:"e7b36bd85080f2bcfb9de34adc766043",indexName:"nacos_test",algoliaOptions:{hitsPerPage:3},inputSelector:'.nav-search-input',debug:false});</script></div></li></ul></div></nav></div></header><section class=animated><div class="col-md-2 blogDocSidebar"><a href=# id=sidebarConsoleBtn><i class="fa fa-bars fa-fw"></i></a><div id=sidebarContent><ul><li><a href=/docs/>Documentation</a></li><ul><li class="collapse show" id=docs><ul><li><a href=/docs/v2.7/>Dubbo 2.7</a></li><ul><li class="collapse show" id=docsv27><ul><li><a href=/docs/v2.7/user/>User</a></li><ul><li class=collapse id=docsv27user><ul><li><a href=/docs/v2.7/user/preface/>Preface</a></li><ul><li class=collapse id=docsv27userpreface><a id=m-docsv27userprefacebackground href=/docs/v2.7/user/preface/background/>Background</a>
<a id=m-docsv27userprefacerequirements href=/docs/v2.7/user/preface/requirements/>Requirements</a>
<a id=m-docsv27userprefacearchitecture href=/docs/v2.7/user/preface/architecture/>Architecture</a>
<a id=m-docsv27userprefaceusage href=/docs/v2.7/user/preface/usage/>Usage</a></li></ul></ul><a id=m-docsv27userquick-start href=/docs/v2.7/user/quick-start/>Quick start</a>
<a id=m-docsv27userdependencies href=/docs/v2.7/user/dependencies/>Dependencies</a>
<a id=m-docsv27usermaturity href=/docs/v2.7/user/maturity/>Maturity</a><ul><li><a href=/docs/v2.7/user/configuration/>Configuration</a></li><ul><li class=collapse id=docsv27userconfiguration><a id=m-docsv27userconfigurationxml href=/docs/v2.7/user/configuration/xml/>XML</a>
<a id=m-docsv27userconfigurationproperties href=/docs/v2.7/user/configuration/properties/>Properties</a>
<a id=m-docsv27userconfigurationapi href=/docs/v2.7/user/configuration/api/>API</a>
<a id=m-docsv27userconfigurationannotation href=/docs/v2.7/user/configuration/annotation/>Annotation</a>
<a id=m-docsv27userconfigurationconfiguration-load-process href=/docs/v2.7/user/configuration/configuration-load-process/>Loading Process</a></li></ul></ul><ul><li><a href=/docs/v2.7/user/examples/>Examples</a></li><ul><li class=collapse id=docsv27userexamples><a id=m-docsv27userexamplespreflight-check href=/docs/v2.7/user/examples/preflight-check/>Preflight Check</a>
<a id=m-docsv27userexamplesfault-tolerent-strategy href=/docs/v2.7/user/examples/fault-tolerent-strategy/>Fault Tolerance</a>
<a id=m-docsv27userexamplesloadbalance href=/docs/v2.7/user/examples/loadbalance/>Load Balance</a>
<a id=m-docsv27userexamplesthread-model href=/docs/v2.7/user/examples/thread-model/>Thread Model</a>
<a id=m-docsv27userexamplesexplicit-target href=/docs/v2.7/user/examples/explicit-target/>Explicit Target</a>
<a id=m-docsv27userexamplessubscribe-only href=/docs/v2.7/user/examples/subscribe-only/>Subscribe Only</a>
<a id=m-docsv27userexamplesmulti-protocols href=/docs/v2.7/user/examples/multi-protocols/>Multiple Protocols</a>
<a id=m-docsv27userexamplesmulti-registry href=/docs/v2.7/user/examples/multi-registry/>Multiple Registries</a>
<a id=m-docsv27userexamplesservice-group href=/docs/v2.7/user/examples/service-group/>Service Group</a>
<a id=m-docsv27userexamplesstatic-service href=/docs/v2.7/user/examples/static-service/>Static Service</a>
<a id=m-docsv27userexamplesmulti-versions href=/docs/v2.7/user/examples/multi-versions/>Multiple Versions</a>
<a id=m-docsv27userexamplesgroup-merger href=/docs/v2.7/user/examples/group-merger/>Group Merger</a>
<a id=m-docsv27userexamplesparameter-validation href=/docs/v2.7/user/examples/parameter-validation/>Parameter Validation</a>
<a id=m-docsv27userexamplesresult-cache href=/docs/v2.7/user/examples/result-cache/>Cache Result</a>
<a id=m-docsv27userexamplesgeneric-reference href=/docs/v2.7/user/examples/generic-reference/>Generic Reference</a>
<a id=m-docsv27userexamplesgeneric-service href=/docs/v2.7/user/examples/generic-service/>Generic Service</a>
<a id=m-docsv27userexamplesecho-service href=/docs/v2.7/user/examples/echo-service/>Echo Service</a>
<a id=m-docsv27userexamplescontext href=/docs/v2.7/user/examples/context/>Context</a>
<a id=m-docsv27userexamplesattachment href=/docs/v2.7/user/examples/attachment/>Attachment</a>
<a id=m-docsv27userexamplesasync-call href=/docs/v2.7/user/examples/async-call/>Async Call</a>
<a id=m-docsv27userexamplesasync-execute-on-provider href=/docs/v2.7/user/examples/async-execute-on-provider/>Async Execution</a>
<a id=m-docsv27userexampleslocal-call href=/docs/v2.7/user/examples/local-call/>Local Call</a>
<a id=m-docsv27userexamplescallback-parameter href=/docs/v2.7/user/examples/callback-parameter/>Callback</a>
<a id=m-docsv27userexamplesevents-notify href=/docs/v2.7/user/examples/events-notify/>Event Notification</a>
<a id=m-docsv27userexampleslocal-stub href=/docs/v2.7/user/examples/local-stub/>Local Stub</a>
<a id=m-docsv27userexampleslocal-mock href=/docs/v2.7/user/examples/local-mock/>Local Mock</a>
<a id=m-docsv27userexamplesdelay-publish href=/docs/v2.7/user/examples/delay-publish/>Delay Publish</a>
<a id=m-docsv27userexamplesconcurrency-control href=/docs/v2.7/user/examples/concurrency-control/>Concurrency</a>
<a id=m-docsv27userexamplesconfig-connections href=/docs/v2.7/user/examples/config-connections/>Connection</a>
<a id=m-docsv27userexampleslazy-connect href=/docs/v2.7/user/examples/lazy-connect/>Lazy Connect</a>
<a id=m-docsv27userexamplesstickiness href=/docs/v2.7/user/examples/stickiness/>Stickiness</a>
<a id=m-docsv27userexamplestoken-authorization href=/docs/v2.7/user/examples/token-authorization/>Token Authorization</a>
<a id=m-docsv27userexamplesrouting-rule href=/docs/v2.7/user/examples/routing-rule/>Routing Rule</a>
<a id=m-docsv27userexamplesconfig-rule href=/docs/v2.7/user/examples/config-rule/>Configure rule</a>
<a id=m-docsv27userexamplesservice-downgrade href=/docs/v2.7/user/examples/service-downgrade/>Service Downgrade</a>
<a id=m-docsv27userexamplesgraceful-shutdown href=/docs/v2.7/user/examples/graceful-shutdown/>Graceful Shutdown</a>
<a id=m-docsv27userexampleshostname-binding href=/docs/v2.7/user/examples/hostname-binding/>Hostname Binding</a>
<a id=m-docsv27userexampleslogger-strategy href=/docs/v2.7/user/examples/logger-strategy/>Logger Strategy</a>
<a id=m-docsv27userexamplesaccesslog href=/docs/v2.7/user/examples/accesslog/>Access Log</a>
<a id=m-docsv27userexamplesservice-container href=/docs/v2.7/user/examples/service-container/>Service Container</a>
<a id=m-docsv27userexamplesreference-config-cache href=/docs/v2.7/user/examples/reference-config-cache/>ReferenceConfig Cache</a>
<a id=m-docsv27userexamplesregistry-only href=/docs/v2.7/user/examples/registry-only/>Register Only</a>
<a id=m-docsv27userexamplesdistributed-transaction href=/docs/v2.7/user/examples/distributed-transaction/>Transaction</a>
<a id=m-docsv27userexamplesdump href=/docs/v2.7/user/examples/dump/>Thread Dump</a>
<a id=m-docsv27userexamplesnetty4 href=/docs/v2.7/user/examples/netty4/>Netty4</a>
<a id=m-docsv27userexamplesserialization href=/docs/v2.7/user/examples/serialization/>Serialization</a></li></ul></ul><ul><li><a href=/docs/v2.7/user/references/>References</a></li><ul><li class=collapse id=docsv27userreferences><ul><li><a href=/docs/v2.7/user/references/xml/>XML</a></li><ul><li class=collapse id=docsv27userreferencesxml><a id=m-docsv27userreferencesxmldubbo-application href=/docs/v2.7/user/references/xml/dubbo-application/>dubbo:application</a>
<a id=m-docsv27userreferencesxmldubbo-argument href=/docs/v2.7/user/references/xml/dubbo-argument/>dubbo:argument</a>
<a id=m-docsv27userreferencesxmldubbo-config-center href=/docs/v2.7/user/references/xml/dubbo-config-center/>dubbo:config-center</a>
<a id=m-docsv27userreferencesxmldubbo-consumer href=/docs/v2.7/user/references/xml/dubbo-consumer/>dubbo:consumer</a>
<a id=m-docsv27userreferencesxmldubbo-method href=/docs/v2.7/user/references/xml/dubbo-method/>dubbo:method</a>
<a id=m-docsv27userreferencesxmldubbo-module href=/docs/v2.7/user/references/xml/dubbo-module/>dubbo:module</a>
<a id=m-docsv27userreferencesxmldubbo-monitor href=/docs/v2.7/user/references/xml/dubbo-monitor/>dubbo:monitor</a>
<a id=m-docsv27userreferencesxmldubbo-parameter href=/docs/v2.7/user/references/xml/dubbo-parameter/>dubbo:parameter</a>
<a id=m-docsv27userreferencesxmldubbo-protocol href=/docs/v2.7/user/references/xml/dubbo-protocol/>dubbo:protocol</a>
<a id=m-docsv27userreferencesxmldubbo-provider href=/docs/v2.7/user/references/xml/dubbo-provider/>dubbo:provider</a>
<a id=m-docsv27userreferencesxmldubbo-reference href=/docs/v2.7/user/references/xml/dubbo-reference/>dubbo:reference</a>
<a id=m-docsv27userreferencesxmldubbo-registry href=/docs/v2.7/user/references/xml/dubbo-registry/>dubbo:registry</a>
<a id=m-docsv27userreferencesxmldubbo-service href=/docs/v2.7/user/references/xml/dubbo-service/>dubbo:service</a></li></ul></ul><ul><li><a href=/docs/v2.7/user/references/protocol/>Protocol</a></li><ul><li class=collapse id=docsv27userreferencesprotocol><a id=m-docsv27userreferencesprotocoldubbo href=/docs/v2.7/user/references/protocol/dubbo/>dubbo://</a>
<a id=m-docsv27userreferencesprotocolrest href=/docs/v2.7/user/references/protocol/rest/>rest://</a>
<a id=m-docsv27userreferencesprotocolhttp href=/docs/v2.7/user/references/protocol/http/>http://</a>
<a id=m-docsv27userreferencesprotocolhessian href=/docs/v2.7/user/references/protocol/hessian/>hessian://</a>
<a id=m-docsv27userreferencesprotocolredis href=/docs/v2.7/user/references/protocol/redis/>redis://</a>
<a id=m-docsv27userreferencesprotocolthrift href=/docs/v2.7/user/references/protocol/thrift/>thrift://</a>
<a id=m-docsv27userreferencesprotocolmemcached href=/docs/v2.7/user/references/protocol/memcached/>memcached://</a>
<a id=m-docsv27userreferencesprotocolrmi href=/docs/v2.7/user/references/protocol/rmi/>rmi://</a>
<a id=m-docsv27userreferencesprotocolwebservice href=/docs/v2.7/user/references/protocol/webservice/>webservice://</a></li></ul></ul><ul><li><a href=/docs/v2.7/user/references/registry/>Registry Server</a></li><ul><li class=collapse id=docsv27userreferencesregistry><a id=m-docsv27userreferencesregistrynacos href=/docs/v2.7/user/references/registry/nacos/>Nacos</a>
<a id=m-docsv27userreferencesregistryzookeeper href=/docs/v2.7/user/references/registry/zookeeper/>Zookeeper</a>
<a id=m-docsv27userreferencesregistrymulticast href=/docs/v2.7/user/references/registry/multicast/>Multicast</a>
<a id=m-docsv27userreferencesregistryredis href=/docs/v2.7/user/references/registry/redis/>Redis</a>
<a id=m-docsv27userreferencesregistrysimple href=/docs/v2.7/user/references/registry/simple/>Simple</a></li></ul></ul><a id=m-docsv27userreferencesmetadata href=/docs/v2.7/user/references/metadata/>Metadata</a>
<a id=m-docsv27userreferencesapi href=/docs/v2.7/user/references/api/>API</a>
<a id=m-docsv27userreferencesqos href=/docs/v2.7/user/references/qos/>Qos</a>
<a id=m-docsv27userreferencestelnet href=/docs/v2.7/user/references/telnet/>Telnet</a>
<a id=m-docsv27userreferencesmaven href=/docs/v2.7/user/references/maven/>Maven</a></li></ul></ul><a id=m-docsv27userbest-practice href=/docs/v2.7/user/best-practice/>Best practice</a>
<a id=m-docsv27userrecommend href=/docs/v2.7/user/recommend/>Recommended usage</a>
<a id=m-docsv27usercapacity-plan href=/docs/v2.7/user/capacity-plan/>Capacity plan</a>
<a id=m-docsv27userperf-test href=/docs/v2.7/user/perf-test/>Performance</a>
<a id=m-docsv27usercoveragence href=/docs/v2.7/user/coveragence/>Test coverage</a>
<a id=m-docsv27userbenchmark-tool href=/docs/v2.7/user/benchmark-tool/>Benchmark Suite</a>
<a id=m-docsv27userrest href=/docs/v2.7/user/rest/>REST support</a>
<a id=m-docsv27usersimple-monitor href=/docs/v2.7/user/simple-monitor/>Simple monitor</a><ul><li><a href=/docs/v2.7/user/languages/>Other Languages</a></li><ul><li class=collapse id=docsv27userlanguages><ul><li><a href=/docs/v2.7/user/languages/erlang/>Erlang</a></li><ul><li class=collapse id=docsv27userlanguageserlang><a id=m-docsv27userlanguageserlangquick-start href=/docs/v2.7/user/languages/erlang/quick-start/>Quick Start</a>
<a id=m-docsv27userlanguageserlangreference href=/docs/v2.7/user/languages/erlang/reference/>Consumer</a>
<a id=m-docsv27userlanguageserlangservice href=/docs/v2.7/user/languages/erlang/service/>Provider</a>
<a id=m-docsv27userlanguageserlangserialization href=/docs/v2.7/user/languages/erlang/serialization/>Protocol</a></li></ul></ul></li></ul></ul></li></ul></ul><ul><li><a href=/docs/v2.7/dev/>Developer</a></li><ul><li class="collapse show" id=docsv27dev><a id=m-docsv27devbuild href=/docs/v2.7/dev/build/>Build</a>
<a id=m-docsv27devdesign href=/docs/v2.7/dev/design/>Design</a>
<a id=m-docsv27devspi href=/docs/v2.7/dev/spi/>SPI</a>
<a id=m-docsv27devimplementation href=/docs/v2.7/dev/implementation/>Implementation</a><ul><li><a class=active href=/docs/v2.7/dev/principals/>Design Principals</a></li><ul><li class="collapse show" id=docsv27devprincipals><a id=m-docsv27devprincipalscode-detail href=/docs/v2.7/dev/principals/code-detail/>Details</a>
<a id=m-docsv27devprincipalsconfiguration class=active2 href=/docs/v2.7/dev/principals/configuration/>Configuration</a>
<a id=m-docsv27devprincipalsdummy href=/docs/v2.7/dev/principals/dummy/>Fool-proof</a>
<a id=m-docsv27devprincipalsexpansibility href=/docs/v2.7/dev/principals/expansibility/>Extensibility</a>
<a id=m-docsv27devprincipalsextension href=/docs/v2.7/dev/principals/extension/>Extension</a>
<a id=m-docsv27devprincipalsgeneral-knowledge href=/docs/v2.7/dev/principals/general-knowledge/>General Rule</a>
<a id=m-docsv27devprincipalsrobustness href=/docs/v2.7/dev/principals/robustness/>Robustness</a></li></ul></ul><ul><li><a href=/docs/v2.7/dev/impls/>SPI Impls</a></li><ul><li class=collapse id=docsv27devimpls><a id=m-docsv27devimplsprotocol href=/docs/v2.7/dev/impls/protocol/>Protocol</a>
<a id=m-docsv27devimplsfilter href=/docs/v2.7/dev/impls/filter/>Filter</a>
<a id=m-docsv27devimplsinvoker-listener href=/docs/v2.7/dev/impls/invoker-listener/>InvokerListener</a>
<a id=m-docsv27devimplsexporter-listener href=/docs/v2.7/dev/impls/exporter-listener/>ExporterListener</a>
<a id=m-docsv27devimplscluster href=/docs/v2.7/dev/impls/cluster/>Cluster</a>
<a id=m-docsv27devimplsrouter href=/docs/v2.7/dev/impls/router/>Router</a>
<a id=m-docsv27devimplsload-balance href=/docs/v2.7/dev/impls/load-balance/>LoadBalance</a>
<a id=m-docsv27devimplsmerger href=/docs/v2.7/dev/impls/merger/>Merger</a>
<a id=m-docsv27devimplsregistry href=/docs/v2.7/dev/impls/registry/>Registry</a>
<a id=m-docsv27devimplsmonitor href=/docs/v2.7/dev/impls/monitor/>Monitor</a>
<a id=m-docsv27devimplsextension-factory href=/docs/v2.7/dev/impls/extension-factory/>ExtensionFactory</a>
<a id=m-docsv27devimplsproxy-factory href=/docs/v2.7/dev/impls/proxy-factory/>ProxyFactory</a>
<a id=m-docsv27devimplscompiler href=/docs/v2.7/dev/impls/compiler/>Compiler</a>
<a id=m-docsv27devimplsconfig-center href=/docs/v2.7/dev/impls/config-center/>Config Center</a>
<a id=m-docsv27devimplsdispatcher href=/docs/v2.7/dev/impls/dispatcher/>Dispatcher</a>
<a id=m-docsv27devimplsthreadpool href=/docs/v2.7/dev/impls/threadpool/>ThreadPool</a>
<a id=m-docsv27devimplsserialize href=/docs/v2.7/dev/impls/serialize/>Serialization</a>
<a id=m-docsv27devimplsremoting href=/docs/v2.7/dev/impls/remoting/>Transporter</a>
<a id=m-docsv27devimplsexchanger href=/docs/v2.7/dev/impls/exchanger/>Exchanger</a>
<a id=m-docsv27devimplsnetworker href=/docs/v2.7/dev/impls/networker/>Networker</a>
<a id=m-docsv27devimplstelnet-handler href=/docs/v2.7/dev/impls/telnet-handler/>TelnetHandler</a>
<a id=m-docsv27devimplsstatus-checker href=/docs/v2.7/dev/impls/status-checker/>StatusChecker</a>
<a id=m-docsv27devimplscontainer href=/docs/v2.7/dev/impls/container/>Container</a>
<a id=m-docsv27devimplspage href=/docs/v2.7/dev/impls/page/>PageHandler</a>
<a id=m-docsv27devimplscache href=/docs/v2.7/dev/impls/cache/>Cache</a>
<a id=m-docsv27devimplsvalidation href=/docs/v2.7/dev/impls/validation/>Validation</a>
<a id=m-docsv27devimplslogger-adapter href=/docs/v2.7/dev/impls/logger-adapter/>LoggerAdapter</a></li></ul></ul><a id=m-docsv27devcontract href=/docs/v2.7/dev/contract/>Public Agreement</a>
<a id=m-docsv27devrelease href=/docs/v2.7/dev/release/>Versions</a>
<a id=m-docsv27devchecklist href=/docs/v2.7/dev/checklist/>Checklist</a>
<a id=m-docsv27devcode-smell href=/docs/v2.7/dev/code-smell/>Bad Smell</a>
<a id=m-docsv27devcoding href=/docs/v2.7/dev/coding/>Coding Convention</a>
<a id=m-docsv27devtck href=/docs/v2.7/dev/tck/>TCK</a></li></ul></ul><ul><li><a href=/docs/v2.7/admin/>Admin</a></li><ul><li class=collapse id=docsv27admin><ul><li><a href=/docs/v2.7/admin/ops/>Dubbo Admin</a></li><ul><li class=collapse id=docsv27adminops><a id=m-docsv27adminopsfunctions href=/docs/v2.7/admin/ops/functions/>Functions</a>
<a id=m-docsv27adminopsintroduction href=/docs/v2.7/admin/ops/introduction/>Introductions</a>
<a id=m-docsv27adminopssearch href=/docs/v2.7/admin/ops/search/>Search</a>
<a id=m-docsv27adminopstest href=/docs/v2.7/admin/ops/test/>Test</a>
<a id=m-docsv27adminopsapidocs href=/docs/v2.7/admin/ops/apidocs/>API Docs&Test</a>
<a id=m-docsv27adminopsgovernance href=/docs/v2.7/admin/ops/governance/>Governance</a>
<a id=m-docsv27adminopspinpoint href=/docs/v2.7/admin/ops/pinpoint/>Pinpoint</a>
<a id=m-docsv27adminopsskywalking href=/docs/v2.7/admin/ops/skywalking/>Skywalking</a></li></ul></ul><ul><li><a href=/docs/v2.7/admin/install/>Installation</a></li><ul><li class=collapse id=docsv27admininstall><a id=m-docsv27admininstalladmin-console href=/docs/v2.7/admin/install/admin-console/>Admin Console</a>
<a id=m-docsv27admininstallprovider-demo href=/docs/v2.7/admin/install/provider-demo/>Demo Provider</a>
<a id=m-docsv27admininstallconsumer-demo href=/docs/v2.7/admin/install/consumer-demo/>Demo Consumer</a>
<a id=m-docsv27admininstallzookeeper href=/docs/v2.7/admin/install/zookeeper/>Config Center</a>
<a id=m-docsv27admininstallredis href=/docs/v2.7/admin/install/redis/>Register Center</a>
<a id=m-docsv27admininstallmonitor-center href=/docs/v2.7/admin/install/monitor-center/>Monitor Center</a></li></ul></ul></li></ul></ul></li></ul></ul><ul><li><a href=/docs/v3.0/>Dubbo 3.0</a></li><ul><li class=collapse id=docsv30></li></ul></ul><ul><li><a href=/docs/contribution-guidelines/>Contribution Guideline</a></li><ul><li class=collapse id=docscontribution-guidelines><ul><li><a href=/docs/contribution-guidelines/contributor/>Contributor</a></li><ul><li class=collapse id=docscontribution-guidelinescontributor><a id=m-docscontribution-guidelinescontributorbecome-a-committer_dev href=/docs/contribution-guidelines/contributor/become-a-committer_dev/>How To</a>
<a id=m-docscontribution-guidelinescontributorcla-signing-guide_dev href=/docs/contribution-guidelines/contributor/cla-signing-guide_dev/>CLA</a>
<a id=m-docscontribution-guidelinescontributornew-contributor-guide_dev href=/docs/contribution-guidelines/contributor/new-contributor-guide_dev/>New Contributor</a>
<a id=m-docscontribution-guidelinescontributormailing-list-subscription-guide_dev href=/docs/contribution-guidelines/contributor/mailing-list-subscription-guide_dev/>Mailing List</a>
<a id=m-docscontribution-guidelinescontributorsoftware-donation-guide_dev href=/docs/contribution-guidelines/contributor/software-donation-guide_dev/>Donation</a>
<a id=m-docscontribution-guidelinescontributorreporting-security-issues_dev href=/docs/contribution-guidelines/contributor/reporting-security-issues_dev/>Security Issue</a>
<a id=m-docscontribution-guidelinescontributordubbo-extension-guide_dev href=/docs/contribution-guidelines/contributor/dubbo-extension-guide_dev/>Developing Extension</a>
<a id=m-docscontribution-guidelinescontributortest-coverage-guide_dev href=/docs/contribution-guidelines/contributor/test-coverage-guide_dev/>Test Coverage</a></li></ul></ul><ul><li><a href=/docs/contribution-guidelines/committer/>Committer</a></li><ul><li class=collapse id=docscontribution-guidelinescommitter><a id=m-docscontribution-guidelinescommitternew-committer-guide_dev href=/docs/contribution-guidelines/committer/new-committer-guide_dev/>Committer Guide</a>
<a id=m-docscontribution-guidelinescommitterrelease-guide_dev href=/docs/contribution-guidelines/committer/release-guide_dev/>Release Guide</a>
<a id=m-docscontribution-guidelinescommitterlabel-an-issue-guide_dev href=/docs/contribution-guidelines/committer/label-an-issue-guide_dev/>Issue Guide</a>
<a id=m-docscontribution-guidelinescommitterwebsite-guide_dev href=/docs/contribution-guidelines/committer/website-guide_dev/>Website Guide</a>
<a id=m-docscontribution-guidelinescommitterapache-dubbo-page_dev href=/docs/contribution-guidelines/committer/apache-dubbo-page_dev/>Official Page</a></li></ul></ul></li></ul></ul></li></ul></ul></div><script>$(function(){$("#sidebarConsoleBtn").click(function(){$("#sidebarContent").toggle();});});</script></div><div class="col-md-2 blogDocToc"><div class=td-page-meta><a href="https://github.com/nacos-group/nacos-group.github.io/issues/new?title=The%20Configuration%20Design" target=_blank><i class="fa fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/alibaba/nacos/issues/new target=_blank><i class="fa fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#classification-of-configuration>Classification of configuration</a></li><li><a href=#configuration-format>Configuration format</a></li><li><a href=#configuration-is-loaded>Configuration is loaded</a></li><li><a href=#programmable-configuration>Programmable configuration</a></li><li><a href=#configure-the-default>Configure the default</a></li><li><a href=#configuration-consistency>Configuration consistency</a></li><li><a href=#configuration-coverage>Configuration coverage</a></li><li><a href=#configuration-inheritance>Configuration inheritance</a></li><li><a href=#configuration-backward-compatibility>Configuration backward compatibility</a></li></ul></nav></div><div class=row><div class=col-md-2></div><div class="col-md-8 blogDocContent"><div class=row><div class=col-md-2><ul></ul></div><div class=col-md-10></div></div><div class=td-content><h1>The Configuration Design</h1><div class="td-byline mb-4"><time datetime=0001-01-01 class=text-muted>Monday, January 01, 0001</time></div><blockquote><p><a href=http://javatar.iteye.com/blog/949527>http://javatar.iteye.com/blog/949527</a></p></blockquote><p>Dubbo design is now completely unobtrusive, namely the user only depends on the configuration of contract.After multiple versions of the development, in order to meet the demand of various scenarios, configuration is more and more.In order to maintain compatibility with only grow, lurking inside all sorts of styles, convention, rules.The new version will also be configured for a adjustment, remove the dubbo, properties, instead of all the spring configuration.Will think of some written in this memo.</p><h2 id=classification-of-configuration>Classification of configuration</h2><p>First of all, the purpose is to have a variety of configuration, which can be roughly divided into:</p><ol start=0><li>Environment configuration, such as: the number of connections, the timeout configuration, etc.</li><li>Describe the configuration, such as: service interface description, service version, etc.</li><li>Extension configuration, such as: protocol extension, strategy to expand, etc.</li></ol><h2 id=configuration-format>Configuration format</h2><p>Usually environment configuration, using the configuration properties will be more convenient, because is some simple discrete values, with the key - value configuration can reduce the learning cost configuration.</p><p>Describe the configuration, information more often, and even have a hierarchy, using XML configuration would be more convenient, because the tree structure configuration expression was stronger.If very complex, and can also custom DSL as configuration.Sometimes such configuration can also use the Annotation instead of, because the configuration and related business logic, in the code is also reasonable.</p><p>Another extension configuration, which may be different.If only policy interface implementation class to replace, can consider the properties of the structure.If there is a complex life cycle management, may need to configure such as XML.Sometimes extended by registering interface provided.</p><h2 id=configuration-is-loaded>Configuration is loaded</h2><p>For environment configuration, in the Java world, comparing to conventional approach, was agreed in a project under the classpath for the name of the configuration properties, such as: log4j. Properties, velocity. The properties and so on.Product during initialization, automatically from the classpath under loading the configuration.Our platform of many programs use a similar strategy, such as: dubbo. Properties, comsat. XML, etc.This has its advantages, is based on agreement, simplifies the user to configure the loading process of intervention.But also has its disadvantages, when the classpath is the same configuration, may be loaded by mistake, and when this isolation, may can&rsquo;t find the configuration, and, when the user wants to configure into the unified directory, not very convenient.</p><p>Dubbo new version removes <code>dubbo.properties</code>, because the contract often conflicts configuration.</p><p>And to describe the configuration, because want to participate in the business logic, usually embedded into the application of life cycle management.There are more and more using spring projects, directly using the spring configuration is common, and spring permits custom schema, configuration simplified is very convenient.Also has its disadvantages, of course, is strongly dependent on the spring, can ask programming interface to do the matching scheme</p><p>In Dubbo configuration is described, but also environment configuration.Part with spring schame configuration is loaded, in part, from the classpath scanning properties configuration is loaded.Users feel very inconvenient, so in the new version of the merged, unified into spring schame configuration load, also increases the flexibility of configuration.</p><p>Extension configuration, usually to the configuration of aggregate demand is higher.Because the product need to find the third party implementation, add it to the product inside.Agreed in the Java world, usually in a specified file each jar package down load, such as: the eclipse plugin. The XML, struts 2 struts - plugin. XML, and so on, this kind of configuration can consider Java standard service discovery mechanisms, namely in the jar meta-inf/services placed under the interface class name file, content is an implementation class name of the class in a row, like encryption algorithm in the JDK extension, the script engine extension, new JDBC driver, etc., are all in this way.see：<a href=http://download.oracle.com/javase/1.4.2/docs/guide/jar/jar.html#Service%20Provider>ServiceProvider Provider</a>。</p><p>Dubbo old version under each jar package through agreement, place called Dubbo - context. The spring configuration XML extensions and integration, the new version to use the JDK&rsquo;s own meta-inf/services, spring from too much dependence.</p><h2 id=programmable-configuration>Programmable configuration</h2><p>Configuration of programmability is very necessary, no matter in what way you load the configuration file, should provide a programming way of configuration, allows the user to not using a configuration file, complete the configuration process with code directly.As a product, especially the component products, usually require collaboration use and other products, when a user integration of your product, may need adapter configuration mode.</p><p>Dubbo new version offers one-on-one configuration class with XML configuration, such as: ServiceConfig corresponding <code>&lt; Dubbo: service / ></code>, and one-to-one attributes, this configuration file configuration and programming the consistency of the understanding, reduce the learning cost.</p><h2 id=configure-the-default>Configure the default</h2><p>Configuration of the default, usually set the reasonable value of a regular environment, thus reducing the user&rsquo;s configuration.Is generally recommended that in online environment for reference, the development environment can adapt by changing the configuration.The default Settings, had better be in the outermost configuration do processing load.The underlying program if found configuration is not correct, you should direct error, fault tolerance in the outermost layer.If, when the underlying program to use, found unreasonable configuration values, just fill a default value, it is easy to cover up the surface, and trigger a deeper problem.And configuration of the middle layer, probably don&rsquo;t know the underlying USES a default value, some may be failure in the middle of the testing conditions.Dubbo first appeared in this problem, the middle layer with &ldquo;address&rdquo; as the cache Key, and the bottom, to &ldquo;address&rdquo; a default port number, lead to don&rsquo;t add port number &ldquo;address&rdquo; and add the default port &ldquo;address&rdquo; did not use the same cache.</p><h2 id=configuration-consistency>Configuration consistency</h2><p>Configuration is always implied some style or hidden rules, should as far as possible to keep its consistency.For example: a lot of functions have switch, and then have a configuration value：</p><ol start=0><li>Whether to use the registry, the registry address.</li><li>Whether to allow a retry, retries.</li></ol><p>You may agree:</p><ol start=0><li>Each is to configure a Boolean type of switch, to configure a value.</li><li>On behalf of the closed with an invalid values, N/A address 0 retries, etc.</li></ol><p>No matter which way, all the configuration items, should keep the same style, Dubbo selected is the second.Also, similar to that of timeout, retry time, timer interval.If a unit is second, another unit is milliseconds (C3P0 configuration item is) so, staff will be crazy.</p><h2 id=configuration-coverage>Configuration coverage</h2><p>Provide configuration, want to consider developers, testers, piping, the system administrator.Testers can&rsquo;t modify the code, and test environment is likely to be more complex, need to have some set aside for testers &ldquo;back door&rdquo;, can be modified in the peripheral configuration items.Like spring is accomplished configuration, support <code>SYSTEM_PROPERTIES_MODE_OVERRIDE</code>, can through the JVM -d parameters, or like hosts agreed a cover configuration files, on the outside of the program, modify some configuration, easy to test.</p><p>Dubbo support through the JVM parameter <code>- Dcom. XXX. XxxService = Dubbo: / / 10.1.1.1:1234</code> directly make the remote service call bypass registry, point to point test.There is a kind of situation, developers to increase the configuration, can according to the deployment of online configuration, such as: <code>&lt; dubbo: registry address = "${dubbo. Registry. Address}" / ></code> because only one online registry, this configuration is no problem, and the testing environment may have two registry, testers can&rsquo;t to modify configuration, changed to:
<code>&lt;dubbo:registry address="${dubbo.registry.address1}" /></code>，
<code>&lt;dubbo:registry address="${dubbo.registry.address2}" /></code>，So this place, Dubbo support in the ${Dubbo. Registry. Address} value, through vertical dividing multiple registry addresses, used to represent a registry address.</p><h2 id=configuration-inheritance>Configuration inheritance</h2><p>Configuration is also &ldquo;duplicate code&rdquo;, there is also a &ldquo;generalization and elaboration&rdquo; problem.Such as: Dubbo timeout Settings, each service, and each method, should be can set the timeout.But a lot of service don&rsquo;t care about overtime, if required each method configuration, it is not realistic.So Dubbo adopted method inherit service timeout, overtime service timeout to inherit the default timeout, no configuration, opens up search.</p><p>Dubbo, moreover, the old version all the timeout, retries, load balancing strategies are only in the service consumer configuration.But in the process of actual use, found that the service provider knows better than consumer, but the configuration items are used in consumer.The new version, joined in the provider can match these parameters, through the registry to the consumer,As a reference, if there is no configuration, consumer to provide configuration shall prevail, the equivalent of consumption ji-cheng fang the provider&rsquo;s advice configuration values.And at the time of the relay configuration registry, can also be on the way to modify configuration, so that achieve the purpose of governance, the equivalent of inheritance relationship：Service consumers &ndash;> Registry &ndash;> Service provider
Dubbo, moreover, the old version all the timeout, retries, load balancing strategies are only in the service consumer configuration.But in the process of actual use, found that the service provider knows better than consumer, but the configuration items are used in consumer.The new version, joined in the provider can match these parameters, through the registry to the consumer.</p><p><img src=static/imgs/dev/configuration-override.png alt=configuration-override></p><h2 id=configuration-backward-compatibility>Configuration backward compatibility</h2><p>Forwards compatibility is very good, as long as you guarantee configuration only grow, basically can guarantee forwards compatibility.But backward compatibility, but also should pay attention to, to prepare for subsequent to join the new configuration items.If a special configuration in configuration, you should make an appointment a compatibility for the &ldquo;special&rdquo; case rules, because the special case, probably will happen later.For example, have a configuration file is save &ldquo;service = address mapping&rdquo;, one of the special line, is saved &ldquo;registry = address&rdquo;.Now application load time to define &ldquo;registry&rdquo; the Key is special, do special processing, the other is &ldquo;service&rdquo;.New version found, however, to add a &ldquo;monitoring center&rdquo; = address, at this point, the old version of the program will handle &ldquo;monitoring center&rdquo; as a &ldquo;service&rdquo;, because the old code can&rsquo;t be change, compatibility is will be very troublesome.If previously agreed upon in the &ldquo;special&rdquo; logo + XXX for special treatment, follow-up will be more convenient.</p><p>Backward compatibility, can learn a lot from HTML5, refer to：<a href=http://javatar.iteye.com/blog/949390>HTML5 design principle</a></p></div></div><div class=col-md-2></div></div></section><footer id=footer role=contentinfo><div class=container><img src=/images/nacos_gray.png><div class=row><div class=col-md-6><h3>Vision</h3><p>By providing an easy-to-use service infrastructure such as dynamic service
discovery, service configuration, service sharing and management and etc., Nacos help users better
construct, deliver and manage their own service platform, reuse and composite business service
faster and deliver value of business innovation more quickly so as to win market for users in the
era of cloud native and in all cloud environments, such as private, mixed, or public clouds.</p></div><div class=col-md-3><dl><dt>Documentation</dt><dd><a href=/en-us/docs/what-is-nacos.html target=_self>Overview</a></dd><dd><a href=/en-us/docs/quick-start.html target=_self>Quick start</a></dd><dd><a href=/en-us/docs/contributing.html target=_self>Developer guide</a></dd></dl></div><div class=col-md-3><dl><dt>Resources</dt><dd><a href=/en-us/community/index.html target=_self>Community</a></dd><dd><a href="https://cn.aliyun.com/product/aliware/mse?spm=nacos-website.topbar.0.0.0" target=_self>Cloud Service MSE</a></dd><dd><a href="https://www.aliyun.com/product/edas?source_type=nacos_pc_20181219" target=_self>Cloud Service EDAS</a></dd><dd><a href="https://www.aliyun.com/product/ahas?source_type=nacos_pc_20190225" target=_self>Cloud Service AHAS</a></dd></dl></div></div><div class="col-md-12 text-center copyright"><span>© 2018 The Nacos Authors | An Alibaba Middleware (Aliware) Project</span></div></div></footer></body><script type=text/javascript>;(function(){$('#fh5co-header').addClass('navbar-fixed-top fh5co-animated slideInDown');$('#nacosLogo').attr("src","/images/nacos_colorful.png")}());</script></html>